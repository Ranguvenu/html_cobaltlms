/**
 * Add a create new group modal to the page.
 *
 * @module     block_proposals/deleterecord
 * @class      deleterecord
 * @package    block_proposals
 * @copyright  2017 Damyon Wiese <damyon@moodle.com>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("block_proposals/deleterecord",["jquery","core/str","core/modal_factory","core/modal_events","core/fragment","core/ajax","core/yui","core/templates","core/notification"],(function($,Str,ModalFactory,ModalEvents,Fragment,Ajax,Y,Templates,Notification){var deleterecord=function(args){this.contextid=args.contextid||1,this.args=args;this.init(args)};return deleterecord.prototype.modal=null,deleterecord.prototype.contextid=-1,{init:function(args){return new deleterecord(args)},deleteConfirm:function(args){return Str.get_strings([{key:"confirm",component:"block_proposals"},{key:"deleteconfirm",component:"block_proposals",param:args},{key:"delete"}]).then(function(s){ModalFactory.create({title:s[0],type:ModalFactory.types.DEFAULT,body:s[1],footer:'<button type="button" class="btn btn-primary" data-action="save">Yes! Delete</button>&nbsp;<button type="button" class="btn btn-danger" data-action="cancel">Cancel</button>'}).done(function(modal){this.modal=modal,modal.getRoot().find('[data-action="save"]').on("click",function(){args.confirm=!0,Ajax.call([{methodname:"block_proposal_"+args.action,args:{id:args.id}}])[0].done((function(){window.location.reload(),window.location.href=window.location.href})).fail((function(ex){console.log(ex)}))}.bind(this)),modal.getFooter().find('[data-action="cancel"]').on("click",(function(){modal.setBody(""),modal.hide()})),modal.show()}.bind(this))}.bind(this))},load:function(){}}}));

//# sourceMappingURL=deleterecord.min.js.map