{"version":3,"file":"custom.min.js","sources":["../src/custom.js"],"sourcesContent":["define(['local_notifications/jquery.dataTables', 'jquery', 'core/str', 'core/modal_factory', 'core/modal_events'],\n        function(dataTable, $, Str, ModalFactory) {\n    return {\n        init: function() {\n            $(document).on('change', '#id_notificationid, #id_costcenterid', function() {\n                var notificationid = $('#id_notificationid').find(\"option:selected\").val();\n                 var costcenterid = $('#id_costcenterid').find(\"option:selected\").val();\n                if (notificationid !== null) {\n                      $.ajax({\n                        method: \"GET\",\n                        dataType: \"json\",\n                        url: M.cfg.wwwroot + \"/local/notifications/custom_ajax.php?notificationid=\"\n                        +notificationid+\"&page=\"+1+\"&costcenterid=\"+costcenterid,\n                        success: function(data){\n                            $(\".form-control-static\").html(data.datastrings);\n                            var template = [];\n                            let findex = 0;\n                            $.each( data.datamoduleids, function( index, value) {\n                                template[0] = '<option value = ' + 0 + ' >' + 'All' + '</option>';          \n                                template += '<option value = ' + value.id + ' >' +value.name + '</option>';\n                           });\n                            var completion_template ='';\n                            $.each( data.completiondays, function( index, value) {\n                                completion_template += '<option value = ' + index + ' >' + value + '</option>';\n                            });\n                            if(template) {\n                                $(\".module_label\").css('display','block');\n                                $(\"div .module_label .tag-info\").html(\"\");\n                                $(\"#id_moduleid\").html(template);\n                                $(\".module_label label\").html(data.datamodule_label);\n                                if(completion_template) {\n                                    $('#select_completiondays').html(completion_template);\n                                    $('#completion_reminder_tag').html('Before Completion Days');\n                                } else {\n                                    $('#select_completiondays').html('<option value=0>Select Completion days</option>');\n                                    $('#completion_reminder_tag').html('');\n                                }\n                            } else {\n                                $(\".module_label\").css('display','none');\n                            }\n                        }\n                    });\n                }\n            });\n            $(document).on('change', '#select_completiondays', function(){\n                var notificationid = $('#id_notificationid').find(\"option:selected\").val();\n                var costcenterid = $('#id_costcenterid').find(\"option:selected\").val();\n                var completiondays = $(this).find(\"option:selected\").val();\n                $.ajax({\n                    method: \"POST\",\n                    dataType: \"json\",\n                    url: M.cfg.wwwroot + \"/local/notifications/custom_ajax.php\",\n                    data : {notificationid: notificationid, page: 4, costcenterid: costcenterid, completiondays: completiondays},\n                    success: function(data){\n                        var template ='';\n                        $.each( data.datamoduleids, function( index, value) {\n                            template += '<option value = ' + value.id + ' >' +value.name + '</option>';\n                        });\n                        if(template){\n                            $(\"#id_moduleid\").html(template);\n                            $(\".module_label label\").html(data.datamodule_label);\n                        }\n                    }\n                });\n            });\n        },\n        notificationDatatable: function(args) {\n            var params = [];\n            params.action = 'display';\n            params.id = args.id;\n            params.context = args.context;\n            $('#notification_info').dataTable({\n                \"bInfo\" : false,\n                \"bLengthChange\": false,\n                \"order\": [],\n                \"language\": {\n                        \"paginate\": {\n                            \"next\": \">\",\n                            \"previous\": \"<\"\n                        }\n                },\n                \"pageLength\": 10\n            });\n        },\n        deletenotification: function(elem) {\n            return Str.get_strings([{\n                key: 'deletenotification',\n                component: 'local_notifications'\n            }, {\n                key: 'deleteconfirm_msg',\n                component: 'local_notifications'\n            }, {\n                key: 'cancel',\n                component: 'moodle'\n            }, {\n                key: 'delete',\n                component: 'moodle'\n            }]).then(function(s) {\n                ModalFactory.create({\n                    title: s[0],\n                    type: ModalFactory.types.DEFAULT,\n                    body: s[1],\n                    footer: \n                '<button type=\"button\" class=\"btn btn-secondary\" data-action=\"cancel\">'+s[2]+'</button>&nbsp;' +'<button type=\"button\" class=\"btn btn-primary\" data-action=\"save\">'+s[3]+'</button>'\n                }).done(function(modal) {\n                    this.modal = modal;\n                    modal.getRoot().find('[data-action=\"save\"]').on('click', function() {\n                        window.location.href ='index.php?delete='+elem+'&confirm=1&sesskey=' + M.cfg.sesskey;\n                    }.bind(this));\n                    modal.getFooter().find('[data-action=\"cancel\"]').on('click', function() {\n                        modal.setBody('');\n                        modal.hide();\n                    });\n                    modal.show();\n                }.bind(this));\n            }.bind(this));\n        }\n    };\n});\n"],"names":["define","dataTable","$","Str","ModalFactory","init","document","on","notificationid","find","val","costcenterid","ajax","method","dataType","url","M","cfg","wwwroot","success","data","html","datastrings","template","each","datamoduleids","index","value","id","name","completion_template","completiondays","css","datamodule_label","this","page","notificationDatatable","args","params","action","context","deletenotification","elem","get_strings","key","component","then","s","create","title","type","types","DEFAULT","body","footer","done","modal","getRoot","window","location","href","sesskey","bind","getFooter","setBody","hide","show"],"mappings":"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"}