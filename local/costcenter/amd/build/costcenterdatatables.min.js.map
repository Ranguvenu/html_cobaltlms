{"version":3,"file":"costcenterdatatables.min.js","sources":["../src/costcenterdatatables.js"],"sourcesContent":["/**\n *\n * @module     local_costcenter/NewSubdept\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine([\n    'local_costcenter/jquery.dataTables',\n    'core/str',\n    'core/modal_factory',\n    'core/modal_events',\n    'core/ajax',\n    'jquery',\n    'jqueryui'\n], function(dataTable, Str, ModalFactory, ModalEvents, Ajax, $) {\n    return {\n        init: function() {\n        },\n        costcenterDatatable: function() {\n            Str.get_strings([{\n                key: 'search',\n                component: 'local_costcenter',\n            }]).then(function(str) {\n                $('#department-index').dataTable({\n                    \"searching\": false,\n                    //\"responsive\": true,\n                    \"aaSorting\": [],\n                    \"lengthMenu\": [[5, 10, 25,50,100, -1], [5,10,25, 50,100, \"All\"]],\n                    \"aoColumnDefs\": [{ 'bSortable': false, 'aTargets': [ 0 ] }],\n                    language: {\n                        search: \"_INPUT_\",\n                        searchPlaceholder: str[0],\n                        \"paginate\": {\n                            // \"next\": \"Next\",\n                            \"previous\": \"Prev\"\n                        }\n                    }\n                });\n            }.bind(this));\n        },\n        costcenterDelete: function(args) {\n            return Str.get_strings([{\n                key: 'confirm'\n            },\n            {\n                key: 'suspendconfirm',\n                component: 'local_users',\n                param :args\n            },\n            {\n                key: 'suspendallconfirm',\n                component: 'local_users'\n            },\n            {\n                key: 'confirm'\n            },\n            {\n                key: 'delete',\n            }]).then(function(s) {\n                ModalFactory.create({\n                    title: s[0],\n                    type: ModalFactory.types.SAVE_CANCEL,\n                    body: args.actionstatusmsg\n                }).done(function(modal) {\n                    this.modal = modal;\n                    modal.setSaveButtonText(s[4]);\n                    modal.getRoot().on(ModalEvents.save, function(e) {\n                        e.preventDefault();\n                        args.confirm = true;\n                        var params = {};\n                        params.id = args.id;\n\n                        var promise = Ajax.call([{\n                            methodname: 'local_costcenter_delete_costcenter',\n                            args: params\n                        }]);\n                        promise[0].done(function() {\n                            window.location.href = window.location.href + String();\n                        }).fail(function() {\n                            // do something with the exception\n                        });\n                    }.bind(this));\n                    modal.show();\n                }.bind(this));\n            }.bind(this));\n        },\n        costcenternotDelete: function(args) {\n            return Str.get_strings([{\n                key: 'confirm'\n            }]).then(function(s) {\n                ModalFactory.create({\n                    title: s[0],\n                    type: ModalFactory.types.DEFAULT,\n                    body: args.actionstatusmsg\n                }).done(function(modal) {\n                    this.modal = modal;\n                    modal.show();\n                }.bind(this));\n            }.bind(this));\n        },\n    };\n});\n"],"names":["define","dataTable","Str","ModalFactory","ModalEvents","Ajax","$","init","costcenterDatatable","get_strings","key","component","then","str","language","search","searchPlaceholder","bind","this","costcenterDelete","args","param","s","create","title","type","types","SAVE_CANCEL","body","actionstatusmsg","done","modal","setSaveButtonText","getRoot","on","save","e","preventDefault","confirm","params","id","call","methodname","window","location","href","String","fail","show","costcenternotDelete","DEFAULT"],"mappings":";;;;;AAKAA,+CAAO,CACH,qCACA,WACA,qBACA,oBACA,YACA,SACA,aACD,SAASC,UAAWC,IAAKC,aAAcC,YAAaC,KAAMC,SAClD,CACHC,KAAM,aAENC,oBAAqB,WACjBN,IAAIO,YAAY,CAAC,CACbC,IAAK,SACLC,UAAW,sBACXC,KAAK,SAASC,KACdP,EAAE,qBAAqBL,UAAU,YAChB,YAEA,cACC,CAAC,CAAC,EAAG,GAAI,GAAG,GAAG,KAAM,GAAI,CAAC,EAAE,GAAG,GAAI,GAAG,IAAK,qBACzC,CAAC,YAAe,WAAmB,CAAE,KACrDa,SAAU,CACNC,OAAQ,UACRC,kBAAmBH,IAAI,YACX,UAEI,YAI1BI,KAAKC,QAEXC,iBAAkB,SAASC,aAChBlB,IAAIO,YAAY,CAAC,CACpBC,IAAK,WAET,CACIA,IAAK,iBACLC,UAAW,cACXU,MAAOD,MAEX,CACIV,IAAK,oBACLC,UAAW,eAEf,CACID,IAAK,WAET,CACIA,IAAK,YACLE,KAAK,SAASU,GACdnB,aAAaoB,OAAO,CAChBC,MAAOF,EAAE,GACTG,KAAMtB,aAAauB,MAAMC,YACzBC,KAAMR,KAAKS,kBACZC,KAAK,SAASC,YACRA,MAAQA,MACbA,MAAMC,kBAAkBV,EAAE,IAC1BS,MAAME,UAAUC,GAAG9B,YAAY+B,KAAM,SAASC,GAC1CA,EAAEC,iBACFjB,KAAKkB,SAAU,MACXC,OAAS,GACbA,OAAOC,GAAKpB,KAAKoB,GAEHnC,KAAKoC,KAAK,CAAC,CACrBC,WAAY,qCACZtB,KAAMmB,UAEF,GAAGT,MAAK,WACZa,OAAOC,SAASC,KAAOF,OAAOC,SAASC,KAAOC,YAC/CC,MAAK,gBAGV9B,KAAKC,OACPa,MAAMiB,QACR/B,KAAKC,QACTD,KAAKC,QAEX+B,oBAAqB,SAAS7B,aACnBlB,IAAIO,YAAY,CAAC,CACpBC,IAAK,aACLE,KAAK,SAASU,GACdnB,aAAaoB,OAAO,CAChBC,MAAOF,EAAE,GACTG,KAAMtB,aAAauB,MAAMwB,QACzBtB,KAAMR,KAAKS,kBACZC,KAAK,SAASC,YACRA,MAAQA,MACbA,MAAMiB,QACR/B,KAAKC,QACTD,KAAKC"}