{"version":3,"file":"ajaxforms.min.js","sources":["../src/ajaxforms.js"],"sourcesContent":["/**\n * Add a create new group modal to the page.\n *\n * @module     core_group/AjaxForms\n * @class      AjaxForms\n * @package\n * @copyright  2022 eAbyas Info Solutions\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery',\n        'core/str',\n        'core/modal_factory',\n        'core/modal_events',\n        'core/fragment',\n        'core/ajax',\n        'core/yui',\n        'core/templates',],\n        function($, Str, ModalFactory, ModalEvents, Fragment, Ajax, Y, Templates) {\n\n    var AjaxForms = function(args) {\n        this.contextid = args.contextid;\n        this.args = args;\n        this.init(args);\n    };\n    /**\n     * @var {Modal} modal\n     * @private\n     */\n    AjaxForms.prototype.modal = null;\n    /**\n     * @var {int} contextid\n     * @private\n     */\n    AjaxForms.prototype.contextid = -1;\n    /**\n     * Initialise the class.\n     *\n     * @param {object} args used to find triggers for the new group modal.\n     * @private\n     * @return {Promise}\n     */\n    AjaxForms.prototype.init = function(args) {\n        // Fetch the title string.\n        var header_label;\n        var self = this;\n            switch (args.callback) {\n                case 'session_form':\n                    switch (args.action) {\n                        case 1:\n                            header_label = {key:'addsession', component:'local_timetable'};\n                        break;\n                        case 2:\n                            header_label = {key:'updatesession', component:'local_timetable'};\n                        break;\n                    }\n                break;\n                case 'update_session':\n                    switch (args.action) {\n                        case 1:\n                            header_label = {key:'addsession', component:'local_timetable'};\n                        break;\n                        case 2:\n                            header_label = {key:'updatesession', component:'local_timetable'};\n                        break;\n                    }\n                break;\n            }\n        var customstrings = Str.get_strings([header_label,{\n                        key: 'savecontinue',\n                        component: 'local_timetable'\n                    },\n                    {\n                        key: 'previous',\n                        component: 'local_timetable'\n                    },\n                    {\n                        key: 'cancel',\n                        component: 'local_timetable'\n                    },\n                    {\n                        key: 'save',\n                        component: 'local_timetable'\n                    }]);\n\n        return customstrings.then(function(strings) {\n            // Create the modal.\n            return ModalFactory.create({\n                type: ModalFactory.types.DEFAULT,\n                title: strings[0],\n                body: this.getBody(),\n                footer: this.getFooter(strings),\n            });\n        }.bind(this)).then(function(modal) {\n            // Keep a reference to the modal.\n            this.modal = modal;\n\n            // Forms are big, we want a big modal.\n            this.modal.setLarge();\n\n            this.modal.getRoot().addClass('openLMStransition local_timetable');\n\n            // We want to reset the form every time it is opened.\n            this.modal.getRoot().on(ModalEvents.hidden, function() {\n                this.modal.getRoot().animate({\"right\":\"-85%\"}, 500);\n                setTimeout(function(){\n                    modal.destroy();\n                }, 1000);\n            }.bind(this));\n            this.modal.getFooter().find('[data-action=\"save\"]').on('click', this.submitForm.bind(this));\n            this.modal.getFooter().find('[data-action=\"cancel\"]').on('click', function() {\n                modal.destroy();\n                window.location.href =  window.location.href + String();\n            });\n\n            this.modal.getFooter().find('[data-action=\"previous\"]').on('click', function() {\n                self.args.form_status = self.args.form_status - 1;\n                var data = self.getBody();\n                data.then(function(html) {\n                    if(html === false) {\n                        window.location.reload();\n                    }\n                });\n                modal.setBody(data);\n                if(self.args.form_status==0){\n                    $('[data-action=\"previous\"]').css('display', 'none');\n                }else{\n                    $('[data-action=\"previous\"]').css('display', 'block');\n                }\n            });\n\n            this.modal.getRoot().on('submit', 'form', function(form) {\n                self.submitFormAjax(form, self.args);\n            });\n            this.modal.show();\n            this.modal.getRoot().animate({\"right\":\"0%\"}, 500);\n            $(\".close\").click(function(){\n                window.location.href =  window.location.href + String();\n            });\n            return this.modal;\n        }.bind(this));\n    };\n    /**\n     * @method getBody\n     * @private\n     * @param {object} formdata\n     * @return {Promise}\n     */\n    AjaxForms.prototype.getBody = function(formdata) {\n        if (typeof formdata === \"undefined\") {\n            formdata = {};\n        }\n        // Get the content of the modal.\n        this.args.jsonformdata = JSON.stringify(formdata);\n        return Fragment.loadFragment(this.args.component, this.args.callback, this.contextid, this.args);\n    };\n    /**\n     * @method getFooter\n     * @private\n     * @param {object} customstrings\n     * @return {Promise}\n     */\n    AjaxForms.prototype.getFooter = function(strings) {\n        var footer;\n        var style;\n        footer = '<button type=\"button\" class=\"btn btn-primary\" data-action=\"save\">'+ strings[4] +'</button>&nbsp;';\n        style = 'style=\"display:none;\"';\n        footer += '<button type=\"button\" class=\"btn btn-secondary\" data-action=\"previous\" ' + style + ' >'+ strings[2] +'</button>&nbsp;';\n        footer += '<button type=\"button\" class=\"btn btn-secondary\" data-action=\"cancel\">'+ strings[3] +'</button>';\n        return footer;\n    };\n    /**\n     * @method handleFormSubmissionResponse\n     * @private\n     * @param {object} args\n     * @return {Promise}\n     */\n    AjaxForms.prototype.handleFormSubmissionResponse = function(args) {\n        this.modal.destroy();\n        // We could trigger an event instead.\n        // Yuk.\n        Y.use('moodle-core-formchangechecker', function() {\n            M.core_formchangechecker.reset_form_dirty_state();\n        });\n        window.location.reload();\n    };\n    /**\n     * @method handleFormSubmissionFailure\n     * @private\n     * @param {object} data\n     * @return {Promise}\n     */\n    AjaxForms.prototype.handleFormSubmissionFailure = function(data) {        \n        // Oh noes! Epic fail :(\n        // Ah wait - this is normal. We need to re-display the form with errors!\n        this.modal.setBody(this.getBody(data));\n    };\n\n    /**\n     * Private method\n     *\n     * @method submitFormAjax\n     * @private\n     * @param {Event} e Form submission event.\n     * @param {object} args\n     */\n    AjaxForms.prototype.submitFormAjax = function(e, args) {\n        // We don't want to do a real form submission.\n        /*var coursesname = data[6]['name'];\n        var courseid = data[6]['value'];*/\n        e.preventDefault();\n        var self = this;\n        // Convert all the form elements values to a serialised string.\n        var formData = this.modal.getRoot().find('form').serialize();\n        var data = this.modal.getRoot().find('form').serializeArray();\n        if (args.callback === \"update_session\") {\n            var method = 'local_timetable_update_instance';\n        }\n        if (args.callback === \"session_form\") {\n            var method = 'local_timetable_submit_instance';\n        }\n\n        var methodname = method;\n        // Now we can continue...\n        var params = {};\n        if (args.callback === \"update_session\") {\n            params.id = args.id;\n        }\n        if (args.callback === \"session_form\" && args.id > 0) {\n            params.id = args.id;\n        }\n        params.contextid = this.contextid;\n        params.jsonformdata = JSON.stringify(formData);\n        params.form_status = args.form_status;\n        params.dayname = args.dayname;\n        params.semesterid = args.semesterid;\n        params.slotid = args.slotid;\n        var promise = Ajax.call([{\n            methodname: methodname,\n            args: params\n        }]);\n        promise[0].done(function(resp){\n            if (resp.form_status == null) {\n                self.args.id = resp.id;\n                self.handleFormSubmissionResponse(self.args);\n            }\n            if (resp.form_status !== -1 && resp.form_status !== false) {\n                self.args.form_status = resp.form_status;\n                self.args.id = resp.id;\n                self.handleFormSubmissionFailure(self.args);\n            } else {\n                self.args.id = resp.id;\n                self.handleFormSubmissionResponse(self.args);\n            }\n        }).fail(function(){\n            self.handleFormSubmissionFailure(formData);\n        });\n\n    };\n    /**\n     * This triggers a form submission, so that any mform elements can do final tricks before the form submission is processed.\n     *\n     * @method submitForm\n     * @param {Event} e Form submission event.\n     * @private\n     */\n    AjaxForms.prototype.submitForm = function(e) {\n        e.preventDefault();\n        this.modal.getRoot().find('form').submit();\n    };\n    return /** @alias module:core_group/AjaxForms */ {\n        // Public variables and functions.\n        /**\n         * Attach event listeners to initialise this module.\n         *\n         * @method init\n         * @param {object} args The CSS selector used to find nodes that will trigger this module.\n         * @return {Promise}\n         */\n        init: function(args) {\n            return new AjaxForms(args);\n        },\n        sessdeleteconfirm: function(args){\n\n            return Str.get_strings([{\n                key: 'confirm',\n                component: 'local_timetable',\n            },\n            {\n                key: 'deleteconfirm',\n                component: 'local_timetable',\n                param : args.sessionname\n            },\n            {\n                key: 'yes',\n                component: 'local_timetable',\n            },\n            {\n                key: 'no',\n                component: 'local_timetable',\n            },\n            {\n                key: 'delete'\n            }]).then(function(s) {\n                ModalFactory.create({\n                    title: s[0],\n                    type: ModalFactory.types.DEFAULT,\n                    body: s[1],\n                    footer: '<button type=\"button\" class=\"btn btn-primary\" data-action=\"save\">'+s[2]+'</button>&nbsp;'\n                            + '<button type=\"button\" class=\"btn btn-secondary\" data-action=\"cancel\">'+s[3]+'</button>'\n                }).done(function(modal) {\n                    this.modal = modal;\n\n                    modal.getRoot().find('[data-action=\"save\"]').on('click', function() {\n                        args.confirm = true;\n                        var data = {};\n                        data.id = args.id;\n                        var promise = Ajax.call([{\n                            methodname: 'local_timetable_delete_instance',\n                            args: data,\n                        }]);\n                        promise[0].done(function() {\n                            window.location.reload();\n                            window.location.href = window.location.href;\n                       }).fail(function(ex) {\n                            // do something with the exception\n                        });\n                    }.bind(this));\n                    modal.getFooter().find('[data-action=\"cancel\"]').on('click', function() {\n                        modal.setBody('');\n                        modal.destroy();\n                    });\n                    modal.show();\n                }.bind(this));\n            }.bind(this));\n        },\n        semslotdeleteconfirm: function(args){\n\n            return Str.get_strings([{\n                key: 'confirm',\n                component: 'local_timetable',\n            },\n            {\n                key: 'deleteconfirmslots',\n                component: 'local_timetable',\n                param : args.levelname\n            },\n            {\n                key: 'yes',\n                component: 'local_timetable',\n            },\n            {\n                key: 'no',\n                component: 'local_timetable',\n            },\n            {\n                key: 'delete'\n            }]).then(function(s) {\n                ModalFactory.create({\n                    title: s[0],\n                    type: ModalFactory.types.DEFAULT,\n                    body: s[1],\n                    footer: '<button type=\"button\" class=\"btn btn-primary\" data-action=\"save\">'+s[2]+'</button>&nbsp;'\n                            + '<button type=\"button\" class=\"btn btn-secondary\" data-action=\"cancel\">'+s[3]+'</button>'\n                }).done(function(modal) {\n                    this.modal = modal;\n\n                    modal.getRoot().find('[data-action=\"save\"]').on('click', function() {\n                        args.confirm = true;\n                        var data = {};\n                        data.id = args.id;\n                        var promise = Ajax.call([{\n                            methodname: 'local_timetable_semester_slots_delete_instance',\n                            args: data,\n                        }]);\n                        promise[0].done(function() {\n                            window.location.reload();\n                            window.location.href = window.location.href;\n                       }).fail(function(ex) {\n                            // do something with the exception\n                        });\n                    }.bind(this));\n                    modal.getFooter().find('[data-action=\"cancel\"]').on('click', function() {\n                        modal.setBody('');\n                        modal.destroy();\n                    });\n                    modal.show();\n                }.bind(this));\n            }.bind(this));\n        },\n        deletesessionConfirm: function(args) {\n            return Str.get_strings([{\n                key: 'confirm'\n            },\n            {\n                key: 'delete_session',\n                component: 'local_timetable',\n                param :args.name\n            },\n            {\n                key: 'yes',\n                component: 'local_timetable',\n            },\n            {\n                key: 'no',\n                component: 'local_timetable',\n            },\n            ]).then(function(s) {\n                ModalFactory.create({\n                    title: s[0],\n                    type: ModalFactory.types.DEFAULT,\n                    body: s[1],\n                    footer: '<button type=\"button\" class=\"btn btn-primary\" data-action=\"save\">'+s[2]+'</button>&nbsp;'\n                            + '<button type=\"button\" class=\"btn btn-secondary\" data-action=\"cancel\">'+s[3]+'</button>'\n                }).done(function(modal) {\n                    this.modal = modal;\n                    // modal.setSaveButtonText(s[3]);\n                    modal.getRoot().find('[data-action=\"save\"]').on('click', function() {\n                        args.confirm = true;\n                        var params = {};\n                        params.id = args.id;\n                        params.contextid = args.contextid;\n                        var promise = Ajax.call([{\n                            methodname: 'local_timetable_'+args.action,\n                            args: params\n                        }]);\n                        promise[0].done(function() {\n                            window.location.href = window.location.href+String();\n                        }).fail(function() {\n                            // do something with the exception\n                        });\n                    }.bind(this));\n                    modal.getFooter().find('[data-action=\"cancel\"]').on('click', function() {\n                        modal.setBody('');\n                        modal.destroy();\n                    });\n                    modal.show();\n                }.bind(this));\n            }.bind(this));\n        },\n        deletesessiontype: function(args) {\n            return Str.get_strings([{\n                key: 'confirm'\n            },\n            {\n                key: 'delete_session_type',\n                component: 'local_timetable',\n                param :args.name\n            },\n            {\n                key: 'yes',\n                component: 'local_timetable',\n            },\n            {\n                key: 'no',\n                component: 'local_timetable',\n            },\n            ]).then(function(s) {\n                ModalFactory.create({\n                    title: s[0],\n                    type: ModalFactory.types.DEFAULT,\n                    body: s[1],\n                    footer: '<button type=\"button\" class=\"btn btn-primary\" data-action=\"save\">'+s[2]+'</button>&nbsp;'\n                            + '<button type=\"button\" class=\"btn btn-secondary\" data-action=\"cancel\">'+s[3]+'</button>'\n                }).done(function(modal) {\n                    this.modal = modal;\n                    // modal.setSaveButtonText(s[3]);\n                    modal.getRoot().find('[data-action=\"save\"]').on('click', function() {\n                        args.confirm = true;\n                        var params = {};\n                        params.id = args.id;\n                        params.contextid = args.contextid;\n                        var promise = Ajax.call([{\n                            methodname: 'local_timetable_'+args.action,\n                            args: params\n                        }]);\n                        promise[0].done(function() {\n                            window.location.href = window.location.href+String();\n                        }).fail(function() {\n                            // do something with the exception\n                        });\n                    }.bind(this));\n                    modal.getFooter().find('[data-action=\"cancel\"]').on('click', function() {\n                        modal.setBody('');\n                        modal.destroy();\n                    });\n                    modal.show();\n                }.bind(this));\n            }.bind(this));\n        },\n        sessiontype_notdelete: function(args) {\n            if (args.type == 'edit') {\n                var skey = 'session_type_not_edit';\n            } else {\n                var skey = 'session_type_not_delete';\n            }\n            return Str.get_strings([{\n                key: 'confirm'\n            },\n            {\n                key: skey,\n                component: 'local_timetable',\n                param : args.name\n            }]).then(function(s) {\n                ModalFactory.create({\n                    title: s[0],\n                    type: ModalFactory.types.DEFAULT,\n                    body: s[1]\n                }).done(function(modal) {\n                    this.modal = modal;\n                    modal.show();\n                }.bind(this));\n            }.bind(this));\n        },\n        load: function() {}\n    };\n});\n"],"names":["define","$","Str","ModalFactory","ModalEvents","Fragment","Ajax","Y","Templates","AjaxForms","args","contextid","init","prototype","modal","header_label","self","this","callback","action","key","component","get_strings","then","strings","create","type","types","DEFAULT","title","body","getBody","footer","getFooter","bind","setLarge","getRoot","addClass","on","hidden","animate","setTimeout","destroy","find","submitForm","window","location","href","String","form_status","data","html","reload","setBody","css","form","submitFormAjax","show","click","formdata","jsonformdata","JSON","stringify","loadFragment","handleFormSubmissionResponse","use","M","core_formchangechecker","reset_form_dirty_state","handleFormSubmissionFailure","e","preventDefault","formData","serialize","serializeArray","method","methodname","params","id","dayname","semesterid","slotid","call","done","resp","fail","submit","sessdeleteconfirm","param","sessionname","s","confirm","ex","semslotdeleteconfirm","levelname","deletesessionConfirm","name","deletesessiontype","sessiontype_notdelete","skey","load"],"mappings":"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"}