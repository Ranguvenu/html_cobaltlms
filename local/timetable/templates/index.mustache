{{!
    This file is part of Moodle - http://moodle.org/
    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.
    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.
    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template local_timetable/index
    Example context (json):
    {
    }
}}
{{#response}}
    <!-- <table class="generaltable" id="timelayoutm_view">
        <thead>
        </thead> -->
        {{#records}}
            {{#hastimetable}}
                <!-- <tbody>
                    <tr>
                        <td class="{{class}}"> -->
                            <div class="panel panel-default {{class}} mb-3 rounded">
                                <div id="timelayoutview-info" class="panel-heading justify-content-between d-flex align-items-center p-2" data-toggle="collapse" data-target="#dialog{{id}}" aria-expanded="false">
                                    <div class="d-flex align-items-center">
                                        <div class="mr-2">
                                            <i class="iconsmall fa fa-chevron-circle-up" onclick="teammember_list({{id}})" id="tm_switchbutton" ></i>
                                        </div>
                                        <div class="org_name">
                                            <div>{{#str}} organisations, local_timetable, {{firstlevel}}{{/str}}: <b class="text-dark">{{organisations}}</b></div>
                                            <div class="program_name">{{#str}} program, local_timetable{{/str}}:
                                                <a href="{{configwwwroot}}/local/program/view.php?bcid={{programid}}" target="_blank">
                                                    {{programname}}
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                    <div>
                                        <div>{{#str}} batch, local_timetable{{/str}}: <b>{{batchname}}</b></div>
                                        
                                    </div>  
                                </div>
                                <div id="dialog{{id}}" class="panel-body collapse tmem_toggle dialog1">
                                {{#emptydata}}
                                    {{#data}}
                                        <div class="level_view p-3" id="timelayout_toggleview{{id}}" width="100%">
                                            <div class="d-flex w-100 justify-content-between">
                                                <div>{{levelname}}</div>
                                                <div>{{startdaterange}} - {{enddaterange}}</div>
                                                <!-- <td><a href="{{configwwwroot}}/local/timetable/timelayoutedit.php?tlid={{semesterid}}">
                                                    <button>{{#str}} view, local_timetable {{/str}} </button></a>
                                                </td> -->
                                                <div class="icon_container d-flex align-items-center">
                                                    <a href="{{configwwwroot}}/local/timetable/individual_session.php?tlid={{semesterid}}" title="{{#str}}view, local_timetable{{/str}}"><i class="icon fa fa-eye view_icon" aria-hidden="true"></i></a>
                                                    {{^sessionexists}}
                                                    <a href="{{configwwwroot}}/local/timetable/timelayout.php?semesterid={{semesterid}}&edit=1&id={{id}}" title="{{#str}}edit, local_timetable{{/str}}">
                                                        <i class="icon fa fa-pencil edit_icon" aria-hidden="true"></i>
                                                    </a>
                                                    <a href="javascript:void(0)" title="{{#str}}delete, local_timetable{{/str}}" onclick="(function(e){ require('local_timetable/ajaxforms').semslotdeleteconfirm({contextid: {{contextid}}, id:{{semesterid}}, levelname: '{{levelname}}' }) })(event)">
                                                        <i class="icon fa fa-trash delete_icon" aria-hidden="true"></i>
                                                    </a>
                                                    {{/sessionexists}}
                                                </div>
                                            </div>
                                        </div>
                                    {{/data}}
                                {{/emptydata}}
                                {{^emptydata}}
                                    {{^data}}
                                        <div class="alert alert-info w-100 text-center">{{#str}}no_records, local_timetable{{/str}}</div>
                                    {{/data}}
                                {{/emptydata}}
                            </div>
                        </div>
                        <!-- </td>
                    </tr>
                </tbody> -->
                {{#js}}
                    $("#id_layout"+{{id}}+"").on('click', function(){
                        // Close div
                        if ($('#tm_switchbutton{{id}}').hasClass('fa-minus-square-o') == true) {
                            $(this).find('.iconsmall').removeClass('fa-minus-square-o').addClass('fa-plus-square-o');
                        }
                        // Open div
                        else if ($('#tm_switchbutton{{id}}').hasClass('fa-plus-square-o') == true) {
                            $(this).find('.iconsmall').removeClass('fa-plus-square-o').addClass('fa-minus-square-o');
                        }
                    });
                {{/js}}
            {{/hastimetable}}
        {{/records}}
    <!-- </table> -->
{{/response}}
