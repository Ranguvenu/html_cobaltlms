{"version":3,"file":"attendanceview.min.js","sources":["../src/attendanceview.js"],"sourcesContent":["/**\n * Add a create new group modal to the page.\n *\n * @module     local/Attendance\n * @class      Attendance\n * @copyright  2023 Dipanshu Kasera\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery'], function($) {\n    $(document).ready(function(){\n        $('.takegrid .status .attendancestatus').on('click', function() {\n            var classes = $(this).attr('class');\n            var res = classes.split(\" \");\n\n            var attclass = res[1];\n            var myclass = res[2];\n            var uclass = res[3];\n            var attid = myclass.replace('attstatus', '');\n            var userid = uclass.replace('u', '');\n\n            if (attclass == 'present') {\n                var color = 'rgb(255, 255, 255)';\n                var id = attid;\n            } else if (attclass == 'absent') {\n                var color = 'rgb(255, 255, 254)';\n                var id = attid;\n            } else {\n                var color = 'rgb(255, 255, 253)';\n                var id = attid;\n            }\n\n            $('.generaltable.takegrid td.userwithoutenrol'+userid).css('background-color', color);\n            $('.generaltable.takegrid td.userwithoutenrol'+userid+' input[name=\"user'+userid+'\"]').val(id);\n\n            if (attclass == 'present') {\n                $('.generaltable.takegrid td.userwithoutenrol'+userid).removeClass('absent');\n                $('.generaltable.takegrid td.userwithoutenrol'+userid).removeClass('late');\n                $('.generaltable.takegrid td.userwithoutenrol'+userid).addClass('present');\n            }\n            if (attclass == 'absent') {\n                $('.generaltable.takegrid td.userwithoutenrol'+userid).removeClass('present');\n                $('.generaltable.takegrid td.userwithoutenrol'+userid).removeClass('late');\n                $('.generaltable.takegrid td.userwithoutenrol'+userid).addClass('absent');\n            }\n            if (attclass == 'late') {\n                $('.generaltable.takegrid td.userwithoutenrol'+userid).removeClass('absent');\n                $('.generaltable.takegrid td.userwithoutenrol'+userid).removeClass('absent');\n                $('.generaltable.takegrid td.userwithoutenrol'+userid).addClass('late');\n            }\n\n            if(attclass == 'late'){\n                $('#representation_comment'+userid).css('display', 'block');\n            } else {\n                $('#representation_comment'+userid).css('display', 'none');\n            }\n\n            $(this).find('input[type=\"text\"]').click(function(event){\n                event.stopPropagation();\n            });\n\n            $(this).find('input[type=\"text\"]').focusout(function(){\n                $('.takegrid .userwithoutenrol'+userid).on(\"click\");\n            });\n        });\n        // $('.takegrid .userwithoutenrol').on('click', function(){\n        //     var classes = $(this).attr('class');\n        //     var res = classes.split(\" \");\n        //     var myclass = res[1];\n        //     var userid = myclass.replace('userwithoutenrol', '');\n\n        //     var statuses = $('.jsonstatus'+userid).val();\n\n        //     var obj = $.parseJSON( statuses );\n        //     var statuss = new Array();\n        //     $.each(obj, function(key, value){\n        //         console.log(value.id);\n        //         statuss[value.acronym] = value.id;\n        //     });\n\n        //     var color = $('.generaltable.takegrid td.'+myclass).css('background-color');\n        //     var colors = [\n        //                     \"novalue\", \"rgb(255, 255, 255)\",\n        //                     \"rgb(255, 255, 254)\",\n        //                     \"rgb(255, 255, 253)\",\n        //                     /*\"rgb(193, 154, 107)\",*/\n        //                     \"rgb(255, 255, 255)\"\n        //                 ];\n        //     var current = $.inArray(color, colors);\n\n        //     if (current !== 0) {\n        //         //code\n        //         var nextcolor = current+1;\n        //     }\n\n        //     var display = [\"\", \"P\", \"A\", \"L\", /*\"E\",*/ \"P\"];\n\n        //     $('.generaltable.takegrid td.'+myclass).css('background-color', colors[nextcolor]);\n        //     $('.generaltable.takegrid td.'+myclass+' input[name=\"user'+userid+'\"]').val(statuss[display[nextcolor]]);\n\n        //     if (display[nextcolor] === 'P') {\n        //         $('.generaltable.takegrid td.'+myclass).removeClass('absent');\n        //         $('.generaltable.takegrid td.'+myclass).removeClass('late');\n        //         $('.generaltable.takegrid td.'+myclass).addClass('present');\n        //     } else if (display[nextcolor] === 'A') {\n        //         $('.generaltable.takegrid td.'+myclass).removeClass('present');\n        //         $('.generaltable.takegrid td.'+myclass).removeClass('late');\n        //         $('.generaltable.takegrid td.'+myclass).addClass('absent');\n        //     } else if (display[nextcolor] === 'L') {\n        //         $('.generaltable.takegrid td.'+myclass).removeClass('present');\n        //         $('.generaltable.takegrid td.'+myclass).removeClass('absent');\n        //         $('.generaltable.takegrid td.'+myclass).addClass('late');\n        //     }\n\n        //     if(display[nextcolor] === \"L\"){\n        //         $('#representation_comment'+userid).css('display', 'block');\n        //     } else {\n        //         $('#representation_comment'+userid).css('display', 'none');\n        //     }\n\n        //     $(this).find('input[type=\"text\"]').click(function(event){\n        //         event.stopPropagation();\n        //     });\n\n        //     $(this).find('input[type=\"text\"]').focusout(function(){\n        //         $('.takegrid .userwithoutenrol'+userid).on(\"click\");\n        //     });\n        // });\n\n        // Don't un-comment below code\n\n        // var value = $('.orange').prop('class');\n        // var val = value.slice(-17);\n        // var userid = val.slice(0, 2);\n\n        // if($('.attendancestatus')[2].outerText === \"L\"){\n        //     $('#representation_comment'+userid).css('display', 'block');\n        // } else {\n        //     $('#representation_comment'+userid).css('display', 'none');\n        // }\n\n        $('.takegrid .userwithoutenrol').click(function(){\n            $(this).on(\"click\");\n        });\n    });\n\n    $(document).ready(function () {\n        var disable_sendmsg = function () {\n            var checked = $(\"input:checked\").length;\n            if (checked == '0') {\n                $('.sendmsg_button').attr('disabled', 'disabled');\n            } else {\n                $('.sendmsg_button').removeAttr('disabled');\n            }\n        };\n        disable_sendmsg();\n        $(\".checkbox\").on(\"click\", disable_sendmsg);\n    });\n\n    return function () {};\n\n});"],"names":["define","$","document","ready","on","res","this","attr","split","attclass","myclass","uclass","attid","replace","userid","color","id","css","val","removeClass","addClass","find","click","event","stopPropagation","focusout","disable_sendmsg","length","removeAttr"],"mappings":";;;;;;;;AAQAA,yCAAO,CAAC,WAAW,SAASC,UACxBA,EAAEC,UAAUC,OAAM,WACdF,EAAE,uCAAuCG,GAAG,SAAS,eAE7CC,IADUJ,EAAEK,MAAMC,KAAK,SACTC,MAAM,KAEpBC,SAAWJ,IAAI,GACfK,QAAUL,IAAI,GACdM,OAASN,IAAI,GACbO,MAAQF,QAAQG,QAAQ,YAAa,IACrCC,OAASH,OAAOE,QAAQ,IAAK,OAEjB,WAAZJ,aACIM,MAAQ,qBACRC,GAAKJ,WACN,GAAgB,UAAZH,SACHM,MAAQ,qBACRC,GAAKJ,WAELG,MAAQ,qBACRC,GAAKJ,MAGbX,EAAE,6CAA6Ca,QAAQG,IAAI,mBAAoBF,OAC/Ed,EAAE,6CAA6Ca,OAAO,oBAAoBA,OAAO,MAAMI,IAAIF,IAE3E,WAAZP,WACAR,EAAE,6CAA6Ca,QAAQK,YAAY,UACnElB,EAAE,6CAA6Ca,QAAQK,YAAY,QACnElB,EAAE,6CAA6Ca,QAAQM,SAAS,YAEpD,UAAZX,WACAR,EAAE,6CAA6Ca,QAAQK,YAAY,WACnElB,EAAE,6CAA6Ca,QAAQK,YAAY,QACnElB,EAAE,6CAA6Ca,QAAQM,SAAS,WAEpD,QAAZX,WACAR,EAAE,6CAA6Ca,QAAQK,YAAY,UACnElB,EAAE,6CAA6Ca,QAAQK,YAAY,UACnElB,EAAE,6CAA6Ca,QAAQM,SAAS,SAGrD,QAAZX,SACCR,EAAE,0BAA0Ba,QAAQG,IAAI,UAAW,SAEnDhB,EAAE,0BAA0Ba,QAAQG,IAAI,UAAW,QAGvDhB,EAAEK,MAAMe,KAAK,sBAAsBC,OAAM,SAASC,OAC9CA,MAAMC,qBAGVvB,EAAEK,MAAMe,KAAK,sBAAsBI,UAAS,WACxCxB,EAAE,8BAA8Ba,QAAQV,GAAG,eA+EnDH,EAAE,+BAA+BqB,OAAM,WACnCrB,EAAEK,MAAMF,GAAG,eAInBH,EAAEC,UAAUC,OAAM,eACVuB,gBAAkB,WAEH,KADDzB,EAAE,iBAAiB0B,OAE7B1B,EAAE,mBAAmBM,KAAK,WAAY,YAEtCN,EAAE,mBAAmB2B,WAAW,aAGxCF,kBACAzB,EAAE,aAAaG,GAAG,QAASsB,oBAGxB"}