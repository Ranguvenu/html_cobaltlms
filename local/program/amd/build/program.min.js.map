{"version":3,"file":"program.min.js","sources":["../src/program.js"],"sourcesContent":["/**\n * Add a create new group modal to the page.\n *\n * @module     local/Program\n * @class      Program\n * @package\n * @copyright  2022 eAbyas Info Solutions\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine([\n    'local_program/jquery.dataTables',\n    'core/str',\n    'core/modal_factory',\n    'core/modal_events',\n    'core/ajax',\n    'jquery',\n    'jqueryui',\n    'core/notification'\n], function(dataTable, Str, ModalFactory, ModalEvents, Ajax, $, Notification) {\n    return {\n        init: function(args) {\n            this.AssignUsers(args);\n        },\n        programDatatable: function(args) {\n            var params = [];\n            params.action = 'viewprograms';\n            params.programstatus = args.programstatus;\n            Str.get_string('search','local_program').then(function(s) {\n            $('#viewprograms').dataTable({\n                'processing': true,\n                'serverSide': true,\n                'ajax': {\n                    \"type\": \"POST\",\n                    \"url\": M.cfg.wwwroot + '/local/program/ajax.php?subdepts='\n                    +args.selected_subdepts+'&costcenterid='\n                    +args.selectedcostcenterid+'&departmentid='\n                    +args.selecteddepartmentid+'&program='\n                    +args.selectedprogram+'&status='\n                    +args.selectedstatus+'&groups='+args.selectedgroups,\n                    \"data\": params\n                },\n                \"bInfo\" : false,\n                \"bLengthChange\": false,\n                \"language\": {\n                    \"paginate\": {\n                        \"next\": \">\",\n                        \"previous\": \"<\"\n                    },\n                    'processing': '<img src='+M.cfg.wwwroot + '/local/ajax-loader.svg>'\n                },\n                 \"oLanguage\": {\n                    \"sSearch\": s,\n                    \"sZeroRecords\": 'No Programs Available',\n                 },\n                \"pageLength\": 6\n            });\n            });\n        },\n        SessionDatatable: function(args) {\n            var params = [];\n            params.action = 'viewprogramsessions';\n            params.programid = args.programid;\n            params.levelid = args.levelid;\n            params.bclcid = args.bclcid;\n            if(args.action != ''){\n                params.tab = args.action;\n            } else {\n                params.tab = false;\n            }\n            $('#viewprogramsessions').dataTable({\n                'processing': true,\n                'serverSide': true,\n                \"language\": {\n                    \"paginate\": {\n                    \"next\": \">\",\n                    \"previous\": \"<\"\n                    },\n                    \"processing\": '<img src='+M.cfg.wwwroot + '/local/ajax-loader.svg>',\n                    \"search\": \"\",\n                    \"searchPlaceholder\": \"Search\"\n                },\n                'ajax': {\n                    \"type\": \"POST\",\n                    \"url\": M.cfg.wwwroot + '/local/program/ajax.php',\n                    \"data\": params\n                },\n                \"responsive\": true,\n                \"pageLength\": 5,\n                \"bLengthChange\": false,\n                \"bInfo\" : false,\n            });\n            this.sessionenrol(args);\n        },\n        sessionenrol: function(args) {\n            $(document).on('click', '.sessionenrol', function() {\n                var sessionargs = $(this).data();\n                return Str.get_strings([{\n                    key: 'confirmation',\n                    component: 'local_program'\n                },\n                {\n                    key: 'confirmschedulesession',\n                    component: 'local_program'\n                },\n                {\n                    key: 'confirmreschedulesession',\n                    component: 'local_program'\n                },\n                {\n                    key: 'confirmcancelsession',\n                    component: 'local_program'\n                },\n                {\n                    key: 'yes'\n                }\n                ]).then(function(s) {\n                    var body = s[1];\n                    if (sessionargs.enrol == 2) {\n                        body = s[2];\n                    } else if (sessionargs.enrol == 3) {\n                        body = s[3];\n                    }\n                    ModalFactory.create({\n                        title: s[0],\n                        type: ModalFactory.types.SAVE_CANCEL,\n                        body: body\n                    }).done(function(modal) {\n                        this.modal = modal;\n                        modal.setSaveButtonText(s[4]);\n                        modal.getRoot().on(ModalEvents.save, function(e) {\n                            e.preventDefault();\n                            args.confirm = true;\n                            var promise = Ajax.call([{\n                                methodname: 'local_program_session_enrolments',\n                                args: sessionargs\n                            }]);\n                            promise[0].done(function() {\n                                window.location.href = window.location.href + String();\n                            }).fail(function() {\n                                // do something with the exception\n                            });\n                        }.bind(this));\n                        modal.show();\n                    }.bind(this));\n                }.bind(this));\n            });\n        },\n        CoursesDatatable: function() {\n            var params = [];\n            params.action = 'viewprogramcourses';\n            params.programid = $('#viewprogramcourses').data('programid');\n            $('#viewprogramcourses').dataTable({\n                'processing': true,\n                'serverSide': true,\n                \"language\": {\n                    \"paginate\": {\n                    \"next\": \">\",\n                    \"previous\": \"<\"\n                    },\n                    \"processing\": '<img src='+M.cfg.wwwroot + '/local/ajax-loader.svg>',\n                    \"search\": \"\",\n                    \"searchPlaceholder\": \"Search\"\n                },\n                'ajax': {\n                    \"type\": \"POST\",\n                    \"url\": M.cfg.wwwroot + '/local/program/ajax.php',\n                    \"data\":params\n                },\n                \"responsive\": true,\n                \"pageLength\": 5,\n                \"bLengthChange\": false,\n                \"bInfo\" : false,\n            });\n        },\n        UsersDatatable: function() {\n            var params = [];\n            params.action = 'viewprogramusers';\n            params.programid = $('#viewprogramusers').data('programid');\n            $('#viewprogramusers').dataTable({\n                'processing': true,\n                'serverSide': true,\n                \"language\": {\n                    \"paginate\": {\n                    \"next\": \">\",\n                    \"previous\": \"<\"\n                    },\n                    \"processing\": '<img src='+M.cfg.wwwroot + '/local/ajax-loader.svg>',\n                    \"search\": \"\",\n                    \"searchPlaceholder\": \"Search\",\n                    \"sZeroRecords\": \"No Students Available\",\n                },\n                'ajax': {\n                    \"type\": \"POST\",\n                    \"url\": M.cfg.wwwroot + '/local/program/ajax.php',\n                    \"data\":params\n                },\n                \"responsive\": true,\n                \"pageLength\": 5,\n                \"bLengthChange\": false,\n                \"bInfo\" : false,\n            });\n        },\n        GroupsDatatable: function() {\n            var params = [];\n            params.action = 'viewgroupusers';\n\n            params.programid = $('#viewgroupusers').data('programid');\n            $('#viewgroupusers').dataTable({\n                'processing': true,\n                'serverSide': true,\n                \"language\": {\n                    \"paginate\": {\n                    \"next\": \">\",\n                    \"previous\": \"<\"\n                    },\n                    \"processing\": '<img src='+M.cfg.wwwroot + '/local/ajax-loader.svg>',\n                    \"search\": \"\",\n                    \"searchPlaceholder\": \"Search\"\n                },\n                'ajax': {\n                    \"type\": \"POST\",\n                    \"url\": M.cfg.wwwroot + '/local/program/ajax.php',\n                    \"data\":params\n                },\n                \"responsive\": true,\n                \"pageLength\": 5,\n                \"bLengthChange\": false,\n                \"bInfo\" : false,\n            });\n        },\n        GroupsDatatables: function() {\n            var params = [];\n            params.action = 'viewgroupusersdata';\n            params.cohortid = $('#viewgroupusersdata').data('groupid');\n            $('#viewgroupusersdata').dataTable({\n                'processing': true,\n                'serverSide': true,\n                \"language\": {\n                    \"paginate\": {\n                    \"next\": \">\",\n                    \"previous\": \"<\"\n                    },\n                    \"processing\": '<img src='+M.cfg.wwwroot + '/local/ajax-loader.svg>',\n                    \"search\": \"\",\n                    \"searchPlaceholder\": \"Search\"\n                },\n                'ajax': {\n                    \"type\": \"POST\",\n                    \"url\": M.cfg.wwwroot + '/local/program/ajax.php',\n                    \"data\":params\n                },\n                \"responsive\": true,\n                \"pageLength\": 5,\n                \"bLengthChange\": false,\n                \"bInfo\" : false,\n            });\n        },\n        deleteConfirm: function(args) {\n            return Str.get_strings([{\n                key: 'confirmation',\n                component: 'local_program'\n            },\n            {\n                key: 'no'\n            },\n            {\n                key: 'deleteallconfirm',\n                component: 'local_program'\n            },\n            {\n                key: 'delete'\n            },\n            {\n                key: 'deletecourseconfirm',\n                component: 'local_program'\n            },\n            {\n                key: 'cannotdeleteall',\n                component: 'local_program'\n            },\n            {\n                key: 'cannotdeletesession',\n                component: 'local_program'\n            },\n            {\n                key: 'cannotdeletelevel',\n                component: 'local_program'\n            },\n            {\n                key: 'inactiveconfirm',\n                component: 'local_program',\n                param: args.programname,\n            },\n            {\n                key: 'activeconfirm',\n                component: 'local_program',\n                param: args.programname,\n            },\n            {\n                key: 'deleteconfirm',\n                component: 'local_program',\n                param: args.programname,\n            },\n            ]).then(function(s) {\n                if (args.action == \"deleteprogram\") {\n                    s[1] = s[10];\n                    var confirm = ModalFactory.types.SAVE_CANCEL;\n                 } else if (args.action == \"deleteprogramcourse\") {\n                    s[1] = s[4];\n                    var confirm = ModalFactory.types.SAVE_CANCEL;\n                 } else if (args.action == \"cannotdeleteprogram\") {\n                    s[1] = s[5];\n                    var confirm = ModalFactory.types.DEFAULT;\n                 } else if (args.action == \"cannotdeletesession\") {\n                    s[1] = s[6];\n                    var confirm = ModalFactory.types.DEFAULT;\n                 } else if (args.action == \"cannotdeletelevel\") {\n                    s[1] = s[7];\n                    var confirm = ModalFactory.types.DEFAULT;\n                 }else if (args.action == \"inactiveprogram\") {\n                    s[1] = s[8];\n                    var confirm = ModalFactory.types.SAVE_CANCEL;\n                 }else if (args.action == \"activeprogram\") {\n                    s[1] = s[9];\n                    var confirm = ModalFactory.types.SAVE_CANCEL;\n                 } else {\n                    s[1] = s[2];\n                    var confirm = ModalFactory.types.SAVE_CANCEL;\n                 }\n                ModalFactory.create({\n                    title: s[0],\n                    type: confirm,\n                    body: s[1]\n                }).done(function(modal) {\n                    this.modal = modal;\n                    if(args.action != \"cannotdeleteprogram\" &&\n                        args.action != \"cannotdeletesession\" &&\n                        args.action != \"cannotdeletelevel\"){\n                        modal.setSaveButtonText(s[3]);\n                    }\n                    if(args.action === \"cannotdeletelevel\"){\n                        $(document).on('click', '#page-local-program-view .modal-header .close', function() {\n                            modal.destroy();\n                        });\n                    }\n                    if (args.action === \"deletelevel\") {\n                        $(document).on('click', '#page-local-program-view .modal-footer .btn-secondary', function() {\n                            modal.destroy();\n                        });\n                        $(document).on('click', '#page-local-program-view .modal-header .close', function() {\n                            modal.destroy();\n                        });\n                    }\n                    modal.getRoot().on(ModalEvents.save, function(e) {\n                        e.preventDefault();\n                        args.confirm = true;\n                        var promise = Ajax.call([{\n                            methodname: 'local_program_' + args.action,\n                            args: args\n                        }]);\n                        promise[0].done(function() {\n                            if(args.action == \"deletestream\"){\n                                window.location.href = M.cfg.wwwroot + '/local/program/streams.php';\n                            }else if(args.action == \"deletesession\" ||\n                                args.action == \"deleteprogram\" ||\n                                args.action == \"activeprogram\" ||\n                                args.action == \"inactiveprogram\"){\n                                window.location.href = window.location.href + String();\n                            } else {\n                                window.location.href = M.cfg.wwwroot +'/local/program/view.php?bcid=' + args.programid;\n                            }\n                        }).fail(function() {\n                            // do something with the exception\n                            console.log(args);\n                        });\n                    }.bind(this));\n                    modal.show();\n                }.bind(this));\n            }.bind(this));\n        },\n        AssignUsers: function() {\n            $('.usersselect').click(function() {\n                var type = $(this).data('id');\n\n                if (type === 'removeselect') {\n                    $('input#remove').prop('disabled', false);\n                    $('input#add').prop('disabled', true);\n                } else if (type === 'addselect') {\n                    $('input#remove').prop('disabled', true);\n                    $('input#add').prop('disabled', false);\n                }\n\n                if ($(this).hasClass('select_all')) {\n                    $('#' + type + ' option').prop('selected', true);\n                } else if ($(this).hasClass('remove_all')) {\n                    $('#' + type ).val('').trigger(\"change\");\n                }\n            });\n        },\n        programStatus: function(args) {\n            return Str.get_strings([\n            {\n                key: 'confirmation',\n                component: 'local_program'\n            },\n            {\n                key: args.actionstatusmsg,\n                component: 'local_program'\n            },\n            {\n                key: 'yes'\n            }]).then(function(s) {\n                ModalFactory.create({\n                    title: s[0],\n                    type: ModalFactory.types.SAVE_CANCEL,\n                    body: s[1]\n                }).done(function(modal) {\n                    this.modal = modal;\n                    modal.setSaveButtonText(s[2]);\n                    modal.getRoot().on(ModalEvents.save, function(e) {\n                        e.preventDefault();\n                        args.confirm = true;\n                        var promise = Ajax.call([{\n                            methodname: 'local_program_' + args.action,\n                            args: args\n                        }]);\n                        promise[0].done(function() {\n                            window.location.href = window.location.href + String();\n                        }).fail(function() {\n                            // do something with the exception\n                        });\n                    }.bind(this));\n                    modal.show();\n                }.bind(this));\n            }.bind(this));\n        },\n    ManageprogramStatus: function(args) {\n            return Str.get_strings([{\n                key: 'confirmation',\n                component: 'local_program'\n            },\n            {\n                key: args.actionstatusmsg,\n                component: 'local_program',\n                param: args.programname,\n            },\n            {\n                key: 'deleteallconfirm',\n                component: 'local_program'\n            },\n            {\n                key: 'yes'\n            }]).then(function(s) {\n                ModalFactory.create({\n                    title: s[0],\n                    type: ModalFactory.types.SAVE_CANCEL,\n                    body: s[1]\n                }).done(function(modal) {\n                    this.modal = modal;\n                    modal.setSaveButtonText(s[3]);\n                    modal.getRoot().on(ModalEvents.save, function(e) {\n                        e.preventDefault();\n                        args.confirm = true;\n                        var promise = Ajax.call([{\n                            methodname: 'local_program_manageprogramStatus',\n                            args: args\n                        }]);\n                        promise[0].done(function() {\n                            window.location.href = M.cfg.wwwroot + '/local/program/view.php?bcid='+args.programid;\n                        }).fail(function() {\n                            // do something with the exception\n                        });\n                    }.bind(this));\n                    modal.show();\n                }.bind(this));\n            }.bind(this));\n        },\n        load: function () {\n                $(document).on('click', '#id_institute_type_1, #id_institute_type_2', function(){\n                    $('#fitem_id_instituteid .form-autocomplete-selection .badge.badge-info').trigger('click');\n                    $('#fitem_id_roomid .form-autocomplete-selection .badge.badge-info').trigger('click');\n                });\n        },\n        unassignCourses: function(args){\n            return Str.get_strings([{\n                    key: 'confirm'\n                },\n                {\n                    key: 'yes'\n                },\n                {\n                    key: 'unassign',\n                    component:'local_program',\n                },\n                {\n                    key: 'cannotunassign_courses_confirm',\n                    component:'local_program',\n                },\n                {\n                    key: 'unassign_courses_confirm',\n                    component: 'local_program',\n                    param : args\n                }]).then(function(s) {\n                    if (args.action == \"unassign_course\") {\n                        s[1] = s[4];\n                        var confirm = ModalFactory.types.SAVE_CANCEL;\n                    } else if (args.action == \"cannotunassign_course\") {\n                        s[1] = s[3];\n                        var confirm = ModalFactory.types.DEFAULT;\n                    } else {\n                         s[1] = s[4];\n                        var confirm = ModalFactory.types.SAVE_CANCEL;\n                    }\n                    ModalFactory.create({\n                        title: s[0],\n                        type: confirm,\n                        body: s[1]\n                    }).done(function(modal) {\n                        this.modal = modal;\n                        if (args.action != \"cannotunassign_course\") {\n                            modal.setSaveButtonText(s[2]);\n                        }\n                        if(args.action === \"cannotunassign_course\"){\n                            $(document).on('click', '#page-local-program-view .modal-header .close', function() {\n                                modal.destroy();\n                            });\n                        }\n                        if (args.action === \"unassign_course\") {\n                            $(document).on('click', '#page-local-program-view .modal-content .modal-footer .btn-secondary', function() {\n                                modal.destroy();\n                            });\n                            $(document).on('click', '#page-local-program-view .modal-content .modal-header .close', function() {\n                                modal.destroy();\n                            });\n                        }\n                        modal.getRoot().on(ModalEvents.save, function(e) {\n                            e.preventDefault();\n                            var params = {};\n                            params.programid = args.bcid;\n                            params.levelid = args.levelid;\n                            params.bclcid = args.bclcid;\n                            var promise = Ajax.call([{\n                                methodname: 'local_program_' + args.action,\n                                args: params\n                            }]);\n                            promise[0].done(function() {\n                                modal.destroy();\n                                if (args.action === \"unassign_course\") {\n                                    $.ajax({\n                                        method: 'POST',\n                                        url: M.cfg.wwwroot + '/local/program/ajax.php',\n                                        data: {\n                                            action: 'programlevelcourses',\n                                            programid:args.bcid,\n                                            levelid: args.levelid\n                                        },\n                                        success:function(resp){\n                                            $('.levetabscontent_container').html(resp);\n                                        }\n                                    });\n                                }\n                                // window.location.href = window.location.href + String();\n                            }).fail(function() {\n                                // do something with the exception\n                            });\n                        }.bind(this));\n                        modal.show();\n                    }.bind(this));\n                this.modal.show();\n            }.bind(this));\n        },\n        /** ODL-866: IKRAM CODE STARTS HERE-- **/\n        enroluser:function(args){\n            return Str.get_strings([\n                    {key: 'course_enrolment', component: 'local_program'},\n                    {key: 'course_enrolment_confirm',component: 'local_program', param:args.coursename},\n                    {key: 'yes'},\n                    {key: 'no'}\n                ]).then(function(s) {\n                    if (args.action == \"enrol\") {\n                        var confirm = ModalFactory.types.SAVE_CANCEL;\n                    } \n                    ModalFactory.create({\n                        title: s[0],\n                        type: confirm,\n                        body: s[1]\n                    }).done(function(modal) {\n                        this.modal = modal;\n                        modal.getRoot().on(ModalEvents.save, function(e) {\n                            e.preventDefault();\n                            var params = {};\n                            params.programid = args.programid;\n                            params.userid = args.userid;\n                            params.courseid = args.courseid;\n                            params.levelid = args.levelid;\n                            var promise = Ajax.call([{\n                                methodname: 'local_program_assign_course',\n                                args: params\n                            }]);\n                            promise[0].done(function() {\n                                window.location.href = window.location.href+'?bcid=' + args.programid\n                            }).fail(function (exception) {\n                                // body...\n                            });\n                        }.bind(this));\n                        modal.show();\n                    }.bind(this));\n                this.modal.show();\n            }.bind(this));\n        },\n        StreamsDatatable: function() {\n            var params = [];\n            params.action = 'viewprogramstreams';\n            Str.get_string('search','local_program').then(function(s) {\n            $('#viewprogramstreams').dataTable({\n                'processing': true,\n                'serverSide': true,\n                'ajax': {\n                    \"type\": \"POST\",\n                    \"url\": M.cfg.wwwroot + '/local/program/ajax.php',\n                    \"data\": params\n                },\n                \"bInfo\" : false,\n                \"bLengthChange\": false,\n                \"language\": {\n                    \"paginate\": {\n                        \"next\": \">\",\n                        \"previous\": \"<\"\n                    },\n                    'processing': '<img src='+M.cfg.wwwroot + '/local/ajax-loader.svg>'\n                },\n                \"oLanguage\": {\n                    \"sSearch\": s\n                 },\n                \"pageLength\": 6\n            });\n            });\n        },\n        getstream: function() {\n            $(document).on('change', '#id_costcenter', function(){\n                var orgID = $(this).val();\n                if(orgID){\n                    var promise = Ajax.call([{\n                        methodname: 'local_program_streams',\n                        args: {\n                            orgid: orgID,\n                        },\n                    }]);\n                    promise[0].done(function(resp) {\n                        var template;\n                        var customstrings = Str.get_strings(\n                            [{\n                                key: 'selectstrem',\n                                component: 'local_program'\n                            }]);\n                            return customstrings.then(function(strings) {\n                                template = '<option value=null>'+strings[0]+'</option>';\n                            });\n                            $.each(JSON.parse(resp), function( index, value) {\n                                template += '<option value = ' + index + ' >' +value + '</option>';\n                            });\n                            $('#id_stream').html(template);\n                    }).fail(function() {\n                        // do something with the exception\n                        alert('Error occured while processing request');\n                         window.location.reload();\n                    });\n                } else {\n                    var template;\n                    var customstrings = Str.get_strings(\n                            [{\n                                key: 'selectstrem',\n                                component: 'local_program'\n                            }]);\n                    return customstrings.then(function(strings) {\n                        template = '<option value=\\'\\'>'+strings[0]+'</option>';\n                    });\n                    $('#id_stream').html(template);\n                }\n           });\n        },\n        unEnrolUser : function(args){\n            return Str.get_strings([{\n                key: 'confirm'\n            },\n            {\n                key: 'program_self_unenrolment',\n                component: 'local_program',\n                param :args.programname\n            }]).then(function(s) {\n                ModalFactory.create({\n                    title: s[0],\n                    type: ModalFactory.types.SAVE_CANCEL,\n                    body: s[1]\n                }).done(function(modal) {\n                    this.modal = modal;\n                    modal.setSaveButtonText(s[0]);\n                    modal.getRoot().on(ModalEvents.save, function(e) {\n                        e.preventDefault();\n                        var params = {};\n                        params.userid = args.userid;\n                        params.programid = args.programid;\n                        params.contextid = args.contextid;\n                        var promise = Ajax.call([{\n                            methodname: 'local_program_unenrol_user',\n                            args: params\n                        }]);\n                        promise[0].done(function() {\n                            window.location.href = M.cfg.wwwroot;\n                        }).fail(function() {\n                        });\n                    }.bind(this));\n                    modal.show();\n                }.bind(this));\n            }.bind(this));\n        },\n    };\n});\n"],"names":["define","dataTable","Str","ModalFactory","ModalEvents","Ajax","$","Notification","init","args","AssignUsers","programDatatable","params","action","programstatus","get_string","then","s","M","cfg","wwwroot","selected_subdepts","selectedcostcenterid","selecteddepartmentid","selectedprogram","selectedstatus","selectedgroups","SessionDatatable","programid","levelid","bclcid","tab","sessionenrol","document","on","sessionargs","this","data","get_strings","key","component","body","enrol","create","title","type","types","SAVE_CANCEL","done","modal","setSaveButtonText","getRoot","save","e","preventDefault","confirm","call","methodname","window","location","href","String","fail","bind","show","CoursesDatatable","UsersDatatable","GroupsDatatable","GroupsDatatables","cohortid","deleteConfirm","param","programname","DEFAULT","destroy","console","log","click","prop","hasClass","val","trigger","programStatus","actionstatusmsg","ManageprogramStatus","load","unassignCourses","bcid","ajax","method","url","success","resp","html","enroluser","coursename","userid","courseid","exception","StreamsDatatable","getstream","orgID","strings","orgid","alert","reload","unEnrolUser","contextid"],"mappings":"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"}