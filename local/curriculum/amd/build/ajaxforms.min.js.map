{"version":3,"file":"ajaxforms.min.js","sources":["../src/ajaxforms.js"],"sourcesContent":["/**\n * Add a create new group modal to the page.\n *\n * @module     core_group/AjaxForms\n * @class      AjaxForms\n * @package\n * @copyright  2022 Eabyas Info Solutions <www.eabyas.in>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery',\n        'core/str',\n        'core/modal_factory',\n        'core/modal_events',\n        'core/fragment',\n        'core/ajax',\n        'core/yui',\n        'core/templates',\n      ],/*globals modal*/\n        function($, Str, ModalFactory, ModalEvents, Fragment, Ajax, Y) {\n    var AjaxForms = function(args) {\n        this.contextid = args.contextid;\n        this.args = args;\n        this.init(args);\n    };\n\n    /**\n     * @var {Modal} modal\n     * @private\n     */\n    AjaxForms.prototype.modal = null;\n\n    /**\n     * @var {int} contextid\n     * @private\n     */\n    AjaxForms.prototype.contextid = -1;\n\n    /**\n     * Initialise the class.\n     *\n     * @param {String} args used to find triggers for the new group modal.\n     * @private\n     * @return {Promise}\n     */\n    AjaxForms.prototype.init = function(args) {\n        // Fetch the title string.\n        var header_label;\n        var self = this;\n            switch (args.callback) {\n                case 'curriculum_form':\n\n                    switch (args.id) {\n                        case 0:\n                            header_label = 'createcurriculums';\n                        break;\n                        default:\n                            header_label = 'updatecurriculum';\n                        break;\n                    }\n                break;\n                case 'session_form':\n                    switch (args.id) {\n                        case 0:\n                            header_label = 'addsession';\n                        break;\n                        default:\n                            header_label = 'updatesession';\n                        break;\n                    }\n                break;\n                case 'course_form':\n                    switch (args.id) {\n                        case 0:\n                            header_label = 'addcourses';\n                        break;\n                        default:\n                            header_label = 'updatecourses';\n                        break;\n                    }\n                break;\n                case 'program_manageprogram_form':\n                    switch (args.id) {\n                        case 0:\n                            header_label = 'addprogram';\n                        break;\n                        default:\n                            header_label = 'updateprogram';\n                        break;\n                    }\n                break;\n                case 'curriculum_completion_form':\n                    header_label = 'curriculum_completion_settings';\n                break;\n                case 'curriculum_managesemester_form':\n                 switch (args.id) {\n                        case 0:\n                            header_label = 'addsemester';\n                        break;\n                        default:\n                            header_label = 'edit_level';\n                        break;\n                    }\n                break;\n                case 'curriculum_manageyear_form':\n                  switch (args.id) {\n                        case 0:\n                            header_label = 'addyear';\n                        break;\n                        default:\n                            header_label = 'updateyear';\n                        break;\n                    }\n                break;\n            }\n        return Str.get_string(header_label, 'local_curriculum').then(function(title) {\n            // Create the modal.\n            return ModalFactory.create({\n                type: ModalFactory.types.DEFAULT,\n                title: title,\n                body: this.getBody(),\n                footer: this.getFooter(),\n            });\n        }.bind(this)).then(function(modal) {\n            // Keep a reference to the modal.\n            this.modal = modal;\n\n            // Forms are big, we want a big modal.\n            this.modal.setLarge();\n\n            this.modal.getRoot().addClass('openLMStransition local_curriculum');\n\n            // We want to reset the form every time it is opened.\n            this.modal.getRoot().on(ModalEvents.hidden, function() {\n                    modal.destroy();\n            }.bind(this));\n            this.modal.getFooter().find('[data-action=\"save\"]').on('click', this.submitForm.bind(this));\n            this.modal.getFooter().find('[data-action=\"cancel\"]').on('click', function() {\n                window.location.href =  window.location.href+String();\n            });\n            this.modal.getFooter().find('[data-action=\"skip\"]').on('click', function() {\n                self.args.form_status = self.args.form_status + 1;\n                 if (args.callback == 'program_form') {\n                 }\n                var data = self.getBody();\n                modal.setBody(data);\n            });\n\n            this.modal.getRoot().on('submit', 'form', function(form) {\n                self.submitFormAjax(form, self.args);\n            });\n            this.modal.show();\n            this.modal.getRoot().animate({\"right\":\"0%\"}, 500);\n            $(\".close\").click(function(){\n                window.location.href =  window.location.href+String();\n            });\n            return this.modal;\n        }.bind(this));\n    };\n\n    /**\n     * @method getBody\n     * @private\n     * @param {object} formdata\n     * @return {Promise}\n     */\n    AjaxForms.prototype.getBody = function(formdata) {\n        if (typeof formdata === \"undefined\") {\n            formdata = {};\n        }\n        // Get the content of the modal.\n        this.args.jsonformdata = JSON.stringify(formdata);\n\n        return Fragment.loadFragment(this.args.component, this.args.callback, this.contextid, this.args);\n    };\n    /**\n     * @method getFooter\n     * @private\n     * @return {Promise}\n     */\n    AjaxForms.prototype.getFooter = function() {\n        var footer;\n         if(this.args.callback == \"course_form\"){\n          footer = '<button type=\"button\" class=\"btn btn-primary\" data-action=\"save\">Assign</button>&nbsp;';\n        }\n        else{\n        if(this.args.id){\n             footer = '<button type=\"button\" class=\"btn btn-primary\" data-action=\"save\">Save changes</button>&nbsp;';\n        }\n        else{\n        footer = '<button type=\"button\" class=\"btn btn-primary\" data-action=\"save\">Save changes</button>&nbsp;';\n        }\n        if (this.args.form_status == 0) {\n            var style = 'style=\"display:none;\"';\n            footer += '<button type=\"button\" class=\"btn btn-secondary\" data-action=\"skip\" ' + style + '>Skip</button>&nbsp;';\n        }\n       }\n        footer += '<button type=\"button\" class=\"btn btn-secondary\" data-action=\"cancel\">Cancel</button>';\n        return footer;\n    };\n    /**\n     * @method handleFormSubmissionResponse\n     * @private\n     * @return {Promise}\n     */\n    AjaxForms.prototype.handleFormSubmissionResponse = function() {\n        this.modal.destroy();\n        // We could trigger an event instead.\n        // Yuk.\n        Y.use('moodle-core-formchangechecker', function() {\n            M.core_formchangechecker.reset_form_dirty_state();\n        });\n        var params = this.args;\n        var semester = params.semesterid;\n        if(params.pluginname == \"curriculum_addyear\"){\n            var yearid = params.id;\n        }else{\n            var yearid = params.yearid;\n        }\n                if(params.yearid){\n                $.ajax({\n                    method: 'POST',\n                    url: M.cfg.wwwroot + '/local/curriculum/ajax.php',\n                    data: {\n                        action: 'curriculumyearsemesters',\n                        curriculumid: params.curriculumid,\n                        yearid: yearid,\n                    },\n                    success:function(resp){\n                        $('.yearstabscontent_container').html(resp);\n            if(semester){\n                if($('.tab-content .local_program-semisters_wrap #lpcourse_content'+semester+' #semcollapse_'+semester+'')\n                    .hasClass('collapse')){\n                    if($('.tab-content .local_program-semisters_wrap .lpcourse_content:first-child .courseslist')\n                        .hasClass('collapse')){\n                         $('.tab-content .local_program-semisters_wrap .lpcourse_content:first-child .semcontentlist.semabove')\n                         .addClass('collapsed');\n                         $('.tab-content .local_program-semisters_wrap .lpcourse_content:first-child .courseslist')\n                         .removeClass('collapse in').addClass('collapse');\n                    }\n                         $('.tab-content .local_program-semisters_wrap #lpcourse_content'+semester+' #semcontentlist'+semester+'')\n                                .attr(\"aria-expanded\",\"true\");\n                         $('.tab-content .local_program-semisters_wrap #lpcourse_content'+semester+' #semcollapse_'+semester+'')\n                         .removeClass('collapse').addClass('collapse in');\n                }\n            }else{\n                            if($('.tab-content .local_program-semisters_wrap .lpcourse_content:first-child .courseslist')\n                                .hasClass('collapse')){\n                                $('.tab-content .local_program-semisters_wrap .lpcourse_content:first-child .courseslist')\n                                .removeClass('collapse').addClass('collapse in');\n                            }\n            }\n                    }\n                });\n            }\n            else{\n                document.location.reload();\n            }\n    };\n    /**\n     * @method handleFormSubmissionFailure\n     * @private\n     * @param {object} data\n     * @return {Promise}\n     */\n    AjaxForms.prototype.handleFormSubmissionFailure = function(data) {\n        // Oh noes! Epic fail :(\n        // Ah wait - this is normal. We need to re-display the form with errors!\n        this.modal.setBody(this.getBody(data));\n    };\n    /**\n     * Private method\n     *\n     * @method submitFormAjax\n     * @private\n     * @param {Event} e Form submission event.\n     * @param {object} args submission event.\n     */\n    AjaxForms.prototype.submitFormAjax = function(e, args) {\n        // We don't want to do a real form submission.\n        e.preventDefault();\n        // Convert all the form elements values to a serialised string.\n        var formData = this.modal.getRoot().find('form').serialize();\n        var methodname = args.plugintype + '_' + args.pluginname + '_submit_data';\n        // Now we can continue...\n        var params = {};\n        params.contextid = args.contextid;\n        params.id = args.id;\n        params.yearid = args.yearid;\n        params.jsonformdata = JSON.stringify(formData);\n        Ajax.call([{\n            methodname: methodname,\n            args: {contextid: this.contextid, jsonformdata: JSON.stringify(formData)},\n            done: this.handleFormSubmissionResponse.bind(this, formData),\n            fail: this.handleFormSubmissionFailure.bind(this, formData)\n        }]);\n    };\n\n    /**\n     * This triggers a form submission, so that any mform elements can do final tricks before the form submission is processed.\n     *\n     * @method submitForm\n     * @param {Event} e Form submission event.\n     * @private\n     */\n    AjaxForms.prototype.submitForm = function(e) {\n        e.preventDefault();\n        this.modal.getRoot().find('form').submit();\n    };\n    return /** @alias module:core_group/AjaxForms */ {\n        // Public variables and functions.\n        /**\n         * Attach event listeners to initialise this module.\n         *\n         * @method init\n         * @param {string} args The CSS selector used to find nodes that will trigger this module.\n         * @return {Promise}\n         */\n          course_switch: function(args) {\n            var checkbox_value;\n            var curriculumid = args.curriculumid;\n            var semesterid = args.semesterid;\n\n                if($('#switch_course_'+args.courseid).is(':checked')){\n                   var switch_type = 1;\n                   checkbox_value = $('#switch_course_'+args.courseid).val();\n                }else{\n                    var switch_type = 0;\n                    checkbox_value = $('#switch_course_'+args.courseid).val();\n                }\n                $.ajax({\n                type: 'POST',\n                url: M.cfg.wwwroot + '/local/curriculum/ajax.php?course='+checkbox_value+\n                                    '&switch_type='+switch_type+'&curriculumid='+curriculumid+'&semesterid='+semesterid,\n                data: {action:''},\n                success: function() {\n                    if(switch_type == 1){\n                        $('#notifycompletion'+checkbox_value).show();\n                    }else{\n                        $('#notifycompletion'+checkbox_value).hide();\n                    }\n                },\n                error: function() {\n                },\n                complete: function() {\n\n                }\n                });\n        },\n        init: function(args) {\n            return new AjaxForms(args);\n        },\n        load: function () {\n              $(document).on('change', '#id_costcenter', function() {\n                var costcentervalue = $(this).find(\"option:selected\").val();\n                if (costcentervalue !== null) {\n                    $.ajax({\n                        method: \"GET\",\n                        dataType: \"json\",\n\n                        url: M.cfg.wwwroot + \"/local/curriculum/ajax.php?action=departmentlist&costcenter=\"+costcentervalue,\n                        success: function(data){\n                            var template = '<option value= 0>Select Program</option>';\n                            $.each(data, function( index, value) {\n                            template +=  '<option value = ' + value.id + ' >' +value.name + '</option>';\n                            });\n                            $(\"#id_programid\").html(template);\n                        }\n                    });\n                }\n            });\n        },\n        myDescFunction: function() {\n                var dots = document.getElementById('descriptiondotsBtn');\n                var moreText = document.getElementById('resttextDisplay');\n                var btnText = document.getElementById('readmoremyBtn');\n                if (dots.style.display === \"none\") {\n                    dots.style.display = \"inline\";\n                    btnText.innerHTML = \"Read more\";\n                    moreText.style.display = \"none\";\n                  } else {\n                    dots.style.display = \"none\";\n                    btnText.innerHTML = \"Read less\";\n                    moreText.style.display = \"inline\";\n                }\n            },\n              curriculumDatatable: function(args) {\n        var params = [];\n            params.action = 'viewcurriculums';\n            params.curriculumstatus = args.curriculumstatus;\n              $.ajax({\n                type: \"POST\",\n               url:   M.cfg.wwwroot + '/local/curriculum/ajax.php',\n                data: {action:'viewcurriculums',\n                    sesskey: M.cfg.sesskey\n                },\n            });\n        },\n        deleteConfirm: function(args) {\n            return Str.get_strings([{\n                key: 'confirmation',\n                component: 'local_curriculum'\n            },\n            {\n                key: 'yes',\n            },\n            {\n                key: 'deleteallconfirm',\n                component: 'local_curriculum'\n            },\n            {\n                key: 'delete',\n                component: 'local_curriculum'\n            },\n            {\n                key: 'deletecourseconfirm',\n                component: 'local_curriculum'\n            },\n            {\n                key: 'cannotdeletecurriculum',\n                component: 'local_curriculum',\n                param: args.curriculumname,\n            },\n            {\n                key: 'cannotdeletesession',\n                component: 'local_curriculum'\n            },\n            {\n                key: 'cannotdeletesemester',\n                component: 'local_curriculum'\n            },\n\n            {\n                key: 'cannotdeletesemesteryear',\n                component: 'local_curriculum'\n            },\n            {\n                key: 'confirmunassignfaculty',\n                component: 'local_curriculum'\n            },\n            {\n                key: 'deleteconfirm',\n                component: 'local_curriculum',\n                param: args.curriculumname,\n            }]).then(function(s) {\n                if (args.action == \"deletecurriculum\") {\n                    s[1] = s[10];\n                    var confirm = ModalFactory.types.SAVE_CANCEL;\n                 } else if (args.action == \"deletecurriculumcourse\") {\n                    s[1] = s[4];\n                    var confirm = ModalFactory.types.SAVE_CANCEL;\n                 } else if (args.action == \"cannotdeletecurriculum\") {\n                    s[1] = s[5];\n                    var confirm = ModalFactory.types.DEFAULT;\n                 } else if (args.action == \"cannotdeletesession\") {\n                    s[1] = s[6];\n                    var confirm = ModalFactory.types.DEFAULT;\n                 } else if (args.action == \"cannotdeletesemester\") {\n                    s[1] = s[7];\n                    var confirm = ModalFactory.types.DEFAULT;\n                 }else if (args.action == \"cannotdeletesemesteryear\") {\n                    s[1] = s[8];\n                    var confirm = ModalFactory.types.SAVE_CANCEL;\n                 }else if (args.action == \"unassignfaculty\") {\n                    s[1] = s[9];\n                    var confirm = ModalFactory.types.SAVE_CANCEL;\n                 } else {\n                    s[1] = s[2];\n                    var confirm = ModalFactory.types.SAVE_CANCEL;\n                 }\n                ModalFactory.create({\n                    title: s[0],\n                    type: confirm,\n                    body: s[1]\n                }).done(function(modal) {\n                    this.modal = modal;\n                    if(args.action != \"cannotdeletecurriculum\" && args.action != \"cannotdeletesession\"\n                        && args.action != \"cannotdeletesemester\" && args.action != \"cannotdeletesemesteryear\"){\n                        modal.setSaveButtonText(s[3]);\n                    }\n                    modal.getRoot().on(ModalEvents.save, function(e) {\n                        e.preventDefault();\n                        args.confirm = true;\n                        var promise = Ajax.call([{\n                            methodname: 'local_curriculum_' + args.action,\n                            args: args\n                        }]);\n                        promise[0].done(function() {\n                            if(args.action == \"deletecurriculum\"){\n                                window.location.href = M.cfg.wwwroot + '/local/curriculum/index.php';\n                            } else {\n                                window.location.href = M.cfg.wwwroot + '/local/curriculum/view.php?ccid='\n                                + args.curriculumid +'&type=1';\n                            }\n                        }).fail(function() {\n                        });\n                    }.bind(this));\n                    modal.show();\n                }.bind(this));\n            }.bind(this));\n        },\n\n        unassignCourses: function(args){\n            return Str.get_strings([{\n                    key: 'confirm'\n                },\n                {\n                    key: 'yes',\n                },\n                {\n                    key: 'unassign',\n                    component:'local_curriculum',\n                },\n                {\n                    key: 'cannotunassign_courses_confirm',\n                    component:'local_curriculum',\n                },\n                {\n                    key: 'unassign_courses_confirm',\n                    component: 'local_curriculum',\n                    param : args\n                }]).then(function(s) {\n                    if (args.action == \"unassign_course\") {\n                        s[1] = s[4];\n                        var confirm = ModalFactory.types.SAVE_CANCEL;\n                    } else if (args.action == \"cannotunassign_course\") {\n                        s[1] = s[3];\n                        var confirm = ModalFactory.types.DEFAULT;\n                    } else {\n                         s[1] = s[0];\n                        var confirm = ModalFactory.types.SAVE_CANCEL;\n                    }\n                    ModalFactory.create({\n                        title: s[0],\n                        type: confirm,\n                        body: s[1]\n                    }).done(function(modal) {\n                        this.modal = modal;\n                        if (args.action != \"cannotunassign_course\") {\n                            modal.setSaveButtonText(s[2]);\n                        }\n                        modal.getRoot().on(ModalEvents.save, function(e) {\n                            e.preventDefault();\n                            var params = {};\n                            params.programid = args.programid;\n                            params.curriculumid = args.curriculumid;\n                            params.semesterid = args.semesterid;\n                            params.yearid = args.yearid;\n                            params.courseid = args.courseid;\n                            var promise = Ajax.call([{\n                                methodname: 'local_curriculum_' + args.action,\n                                args: params\n                            }]);\n                            promise[0].done(function() {\n                                modal.hide();\n                                var semester = params.semesterid;\n                                $.ajax({\n                                    method: 'POST',\n                                    url: M.cfg.wwwroot + '/local/curriculum/ajax.php',\n                                    data: {\n                                        action: 'curriculumyearsemesters',\n                                        curriculumid: params.curriculumid,\n                                        yearid: params.yearid,\n                                    },\n                                    success:function(resp){\n                                        $('.yearstabscontent_container').html(resp);\n                if(semester){\n                   if($('.tab-content .local_program-semisters_wrap #lpcourse_content'+semester+' #semcollapse_'+semester+'')\n                                                .hasClass('collapse')){\n                     if($('.tab-content .local_program-semisters_wrap .lpcourse_content:first-child .courseslist')\n                        .hasClass('collapse')){\n                        $('.tab-content .local_program-semisters_wrap .lpcourse_content:first-child .semcontentlist.semabove')\n                        .addClass('collapsed');\n                        $('.tab-content .local_program-semisters_wrap .lpcourse_content:first-child .courseslist')\n                        .removeClass('collapse in').addClass('collapse');\n                     }\n                        $('.tab-content .local_program-semisters_wrap #lpcourse_content'+semester+' #semcontentlist'+semester+'')\n                        .attr(\"aria-expanded\",\"true\");\n                        $('.tab-content .local_program-semisters_wrap #lpcourse_content'+semester+' #semcollapse_'+semester+'')\n                        .removeClass('collapse').addClass('collapse in');\n                   }\n                }else{\n                     if($('.tab-content .local_program-semisters_wrap .lpcourse_content:first-child .courseslist')\n                        .hasClass('collapse')){\n                        $('.tab-content .local_program-semisters_wrap .lpcourse_content:first-child .courseslist')\n                        .removeClass('collapse').addClass('collapse in');\n                     }\n                }\n                                    }\n                                });\n                            }).fail(function() {\n                            });\n                        }.bind(this));\n                        modal.show();\n                    }.bind(this));\n                modal.show();\n            }.bind(this));\n        },\n    };\n});\n"],"names":["define","$","Str","ModalFactory","ModalEvents","Fragment","Ajax","Y","AjaxForms","args","contextid","init","prototype","modal","header_label","self","this","callback","id","get_string","then","title","create","type","types","DEFAULT","body","getBody","footer","getFooter","bind","setLarge","getRoot","addClass","on","hidden","destroy","find","submitForm","window","location","href","String","form_status","data","setBody","form","submitFormAjax","show","animate","click","formdata","jsonformdata","JSON","stringify","loadFragment","component","handleFormSubmissionResponse","use","M","core_formchangechecker","reset_form_dirty_state","params","semester","semesterid","pluginname","yearid","ajax","method","url","cfg","wwwroot","action","curriculumid","success","resp","html","hasClass","removeClass","attr","document","reload","handleFormSubmissionFailure","e","preventDefault","formData","serialize","methodname","plugintype","call","done","fail","submit","course_switch","checkbox_value","courseid","is","switch_type","val","hide","error","complete","load","costcentervalue","dataType","template","each","index","value","name","myDescFunction","dots","getElementById","moreText","btnText","style","display","innerHTML","curriculumDatatable","curriculumstatus","sesskey","deleteConfirm","get_strings","key","param","curriculumname","s","confirm","SAVE_CANCEL","setSaveButtonText","save","unassignCourses","programid"],"mappings":"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"}