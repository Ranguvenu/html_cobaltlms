{"version":3,"file":"curriculum_views.min.js","sources":["../src/curriculum_views.js"],"sourcesContent":["define([\n    'local_curriculum/jquery.dataTables',\n    'core/str',\n    'core/modal_factory',\n    'core/modal_events',\n    'core/ajax',\n    'jquery',\n    'jqueryui'\n], function(dataTable, Str, ModalFactory, ModalEvents, Ajax, $) {\n    return {\n        init: function() {\n        },\n         curriculumdatatable: function(args){\n            $('#viewcurriculum').dataTable({\n               \"searching\": true,\n                \"responsive\": true,\n                \"processing\": true,\n                \"lengthMenu\": [[10, 25,50,100, -1], [10,25, 50,100, \"All\"]],\n                \"language\": {\n                    \"emptyTable\": \"No Curriculums available in table\",\n                    \"sProcessing\": \"<img src= \"+ M.cfg.wwwroot + \"/local/ajax-loader.svg />\"\n                },\n                 \"aaSorting\": [],\n                 \"pageLength\": 10,\n            \"sAjaxSource\": M.cfg.wwwroot + \"/local/curriculum/manual_curriculum_processing.php?param=\"+args,\n            });\n        },\n        UsersDatatable: function() {\n        var params = [];\n            params.action = 'viewcurriculumusers';\n            params.curriculumid = $('#viewcurriculumusers').data('curriculumid');\n            params.yearid = $('#viewcurriculumusers').data('yearid');\n            $('#viewcurriculumusers').dataTable({\n                'processing': true,\n                'serverSide': true,\n                \"language\": {\n                    \"paginate\": {\n                    \"next\": \">\",\n                    \"previous\": \"<\"\n                    },\n                    \"processing\": '<img src='+M.cfg.wwwroot + '/local/ajax-loader.svg>',\n                    \"search\": \"\",\n                    \"searchPlaceholder\": \"Search\"\n                },\n                'ajax': {\n                    \"type\": \"POST\",\n                    \"url\": M.cfg.wwwroot + '/local/curriculum/ajax.php',\n                    \"data\":params\n                },\n                \"responsive\": true,\n                \"pageLength\": 10,\n            });\n        },\n        checkProgramStatus : function(args) {\n               $.ajax({\n                    type: \"POST\",\n                    url:   M.cfg.wwwroot + '/local/curriculum/ajax.php',\n                    data: { id: args.id, curriculumid: args.ccid, costcenter: args.costcenter, action:'programstatusvalidation',\n                        sesskey: M.cfg.sesskey\n                          },\n                    success: function(returndata) {\n                        if(returndata.finalstatus == 'true'){\n                            ModalFactory.create({\n                             title: 'Confirmation',\n                             type: ModalFactory.types.SAVE_CANCEL,\n                             body: Str.get_string('publishcurriculum_message', 'local_curriculum'),\n                            }).done(function(modal) {\n                                this.modal = modal;\n                                modal.setSaveButtonText('Publish');\n                                modal.getRoot().on(ModalEvents.save, function() {\n                                var returndata = \"Published Successfully....\";\n                                ModalFactory.create({\n                                title: 'Success!',\n                                body : returndata,\n                                }).done(function(modal) {\n                                    modal.show();\n                                    setTimeout(function(){\n                                                modal.destroy();\n                                             },20000);\n                                    document.location.reload();\n                                 }.bind(this));\n                                }.bind(this));\n                             modal.show();\n                            }.bind(this));\n                        }else{\n                            ModalFactory.create({\n                                type: ModalFactory.types.CANCEL,\n                                title: 'Alert!',\n                                body: returndata.message\n                              }).done(function(modal){\n                                    modal.show();\n                                    modal.getRoot().on(ModalEvents.hidden, function() {\n                                            modal.destroy();\n                                    }.bind(this));\n                                    $(\".close\").click(function(){\n                                        modal.hide();\n                                        modal.destroy();\n                                    });\n                              });\n                        }\n                    }\n               });\n        },\n         FacultysDatatable: function() {\n        var params = [];\n            params.action = 'viewcoursefaculty';\n            params.yearid = $('#viewcoursefaculty').data('yearid');\n            params.semesterid = $('#viewcoursefaculty').data('semesterid');\n            params.courseid = $('#viewcoursefaculty').data('courseid');\n            $('#viewcoursefaculty').dataTable({\n                'processing': true,\n                'serverSide': true,\n                \"language\": {\n                    \"paginate\": {\n                    \"next\": \">\",\n                    \"previous\": \"<\"\n                    },\n                    \"processing\": '<img src='+M.cfg.wwwroot + '/local/ajax-loader.svg>',\n                    \"search\": \"\",\n                    \"searchPlaceholder\": \"Search\"\n                },\n                'ajax': {\n                    \"type\": \"POST\",\n                    \"url\": M.cfg.wwwroot + '/local/curriculum/ajax.php',\n                    \"data\":params\n                },\n                \"responsive\": true,\n                \"pageLength\": 5,\n                \"bLengthChange\": false,\n                \"bInfo\" : false,\n            });\n        },\n    };\n});\n"],"names":["define","dataTable","Str","ModalFactory","ModalEvents","Ajax","$","init","curriculumdatatable","args","M","cfg","wwwroot","UsersDatatable","params","action","curriculumid","data","yearid","checkProgramStatus","ajax","type","url","id","ccid","costcenter","sesskey","success","returndata","finalstatus","create","title","types","SAVE_CANCEL","body","get_string","done","modal","setSaveButtonText","getRoot","on","save","show","setTimeout","destroy","document","location","reload","bind","this","CANCEL","message","hidden","click","hide","FacultysDatatable","semesterid","courseid"],"mappings":"AAAAA,2CAAO,CACH,qCACA,WACA,qBACA,oBACA,YACA,SACA,aACD,SAASC,UAAWC,IAAKC,aAAcC,YAAaC,KAAMC,SAClD,CACHC,KAAM,aAELC,oBAAqB,SAASC,MAC3BH,EAAE,mBAAmBL,UAAU,YACf,cACE,cACA,aACA,CAAC,CAAC,GAAI,GAAG,GAAG,KAAM,GAAI,CAAC,GAAG,GAAI,GAAG,IAAK,iBACxC,YACM,gDACC,aAAcS,EAAEC,IAAIC,QAAU,uCAEnC,cACC,eACJF,EAAEC,IAAIC,QAAU,4DAA4DH,QAG/FI,eAAgB,eACZC,OAAS,GACTA,OAAOC,OAAS,sBAChBD,OAAOE,aAAeV,EAAE,wBAAwBW,KAAK,gBACrDH,OAAOI,OAASZ,EAAE,wBAAwBW,KAAK,UAC/CX,EAAE,wBAAwBL,UAAU,aAClB,cACA,WACF,UACI,MACJ,aACI,gBAEE,YAAYS,EAAEC,IAAIC,QAAU,iCAChC,qBACW,eAEjB,MACI,WACDF,EAAEC,IAAIC,QAAU,kCAChBE,oBAEG,aACA,MAGtBK,mBAAqB,SAASV,MACvBH,EAAEc,KAAK,CACFC,KAAM,OACNC,IAAOZ,EAAEC,IAAIC,QAAU,6BACvBK,KAAM,CAAEM,GAAId,KAAKc,GAAIP,aAAcP,KAAKe,KAAMC,WAAYhB,KAAKgB,WAAYV,OAAO,0BAC9EW,QAAShB,EAAEC,IAAIe,SAEnBC,QAAS,SAASC,YACe,QAA1BA,WAAWC,YACV1B,aAAa2B,OAAO,CACnBC,MAAO,eACPV,KAAMlB,aAAa6B,MAAMC,YACzBC,KAAMhC,IAAIiC,WAAW,4BAA6B,sBAChDC,KAAK,SAASC,YACRA,MAAQA,MACbA,MAAMC,kBAAkB,WACxBD,MAAME,UAAUC,GAAGpC,YAAYqC,KAAM,WAErCtC,aAAa2B,OAAO,CACpBC,MAAO,WACPG,KAHiB,+BAIdE,KAAK,SAASC,OACbA,MAAMK,OACNC,YAAW,WACCN,MAAMO,YACP,KACXC,SAASC,SAASC,UACnBC,KAAKC,QACND,KAAKC,OACVZ,MAAMK,QACLM,KAAKC,OAEP9C,aAAa2B,OAAO,CAChBT,KAAMlB,aAAa6B,MAAMkB,OACzBnB,MAAO,SACPG,KAAMN,WAAWuB,UAChBf,MAAK,SAASC,OACXA,MAAMK,OACNL,MAAME,UAAUC,GAAGpC,YAAYgD,OAAQ,WAC/Bf,MAAMO,WACZI,KAAKC,OACP3C,EAAE,UAAU+C,OAAM,WACdhB,MAAMiB,OACNjB,MAAMO,oBAOrCW,kBAAmB,eAChBzC,OAAS,GACTA,OAAOC,OAAS,oBAChBD,OAAOI,OAASZ,EAAE,sBAAsBW,KAAK,UAC7CH,OAAO0C,WAAalD,EAAE,sBAAsBW,KAAK,cACjDH,OAAO2C,SAAWnD,EAAE,sBAAsBW,KAAK,YAC/CX,EAAE,sBAAsBL,UAAU,aAChB,cACA,WACF,UACI,MACJ,aACI,gBAEE,YAAYS,EAAEC,IAAIC,QAAU,iCAChC,qBACW,eAEjB,MACI,WACDF,EAAEC,IAAIC,QAAU,kCAChBE,oBAEG,aACA,iBACG,SACP"}