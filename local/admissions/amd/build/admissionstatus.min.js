/**
 * Add a create new group modal to the page.
 *
 * @module     local_admissions/confirm
 * @class      admissionstatus
 * @package
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_admissions/admissionstatus",["jquery","local_program/jquery.dataTables","core/str","core/modal_factory","core/modal_events","core/ajax","jqueryui"],(function($,dataTable,Str,ModalFactory,ModalEvents,Ajax){return{init:function(args){this.AssignUsers(args)},acceptConfirm:function(args){return Str.get_strings([{key:"acceptapplication",component:"local_admissions"},{key:"save_continue",component:"local_admissions"},{key:"acceptconfirm",component:"local_admissions"},{key:"save_continue",component:"local_admissions"},{key:"deletecourseconfirm",component:"local_admissions"},{key:"cannotdeleteall",component:"local_admissions"},{key:"cannotdeletesession",component:"local_admissions"},{key:"cannotdeletelevel",component:"local_admissions"},{key:"inactiveconfirm",component:"local_admissions",param:args.programname},{key:"activeconfirm",component:"local_admissions",param:args.programname},{key:"acceptconfirm",component:"local_admissions",param:args.programname},{key:"rejectconfirm",component:"local_admissions"}]).then(function(s){if("acceptconfirm"==args.action){s[1]=s[10];var confirm=ModalFactory.types.SAVE_CANCEL}else if("rejectadmission"==args.action){s[1]=s[11];confirm=ModalFactory.types.SAVE_CANCEL}else if("acceptconfirm"==args.action){s[1]=s[4];confirm=ModalFactory.types.SAVE_CANCEL}else if("cannotdeletelevel"==args.action){s[1]=s[5];confirm=ModalFactory.types.DEFAULT}else if("cannotdeletesession"==args.action){s[1]=s[6];confirm=ModalFactory.types.DEFAULT}else if("cannotdeletelevel"==args.action){s[1]=s[7];confirm=ModalFactory.types.DEFAULT}else if("inactiveconfirm"==args.action){s[1]=s[8];confirm=ModalFactory.types.SAVE}else if("activeconfirm"==args.action){s[1]=s[9];confirm=ModalFactory.types.SAVE_CANCEL}else{s[1]=s[2];confirm=ModalFactory.types.SAVE_CANCEL}ModalFactory.create({title:s[0],type:confirm,body:s[2]}).done(function(modal){this.modal=modal,"cannotdeleteprogram"!=args.action&&"cannotdeletesession"!=args.action&&"cannotdeletelevel"!=args.action&&modal.setSaveButtonText(s[3]),modal.getRoot().on(ModalEvents.save,function(e){e.preventDefault(),args.confirm=!0;var params={};params.programid=args.programid,"rejectadmission"==args.action&&(args.action="reject_admission",params.userid=args.userid,params.programid=args.programid),"acceptadmission"==args.action&&(args.action="accept_admission",params.action=args.action,params.context=args.context,params.id=args.id,params.programid=args.programid,params.confirm=args.confirm,params.programname=args.programname);let footer=Y.one(".modal-footer");M.util.add_spinner(Y,footer).show(),Ajax.call([{methodname:"local_admissions_"+args.action,args:params}])[0].done((function(){"deletestream"==args.action?window.location.href=M.cfg.wwwroot+"/local/admissions/view.php":("deletesession"==args.action||"acceptconfirm"==args.action||"activeconfirm"==args.action||args.action,modal.hide(),window.location.reload())})).fail((function(){}))}.bind(this)),modal.show()}.bind(this))}.bind(this))}}}));

//# sourceMappingURL=admissionstatus.min.js.map