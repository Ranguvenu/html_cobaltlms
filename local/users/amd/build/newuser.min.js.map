{"version":3,"file":"newuser.min.js","sources":["../src/newuser.js"],"sourcesContent":["/**\n * Add a create new group modal to the page.\n *\n * @module     local_users/newuser\n * @class      NewUser\n * @package\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/str', 'core/modal_factory', 'core/modal_events',\n    'core/fragment', 'core/ajax', 'core/yui','local_courses/jquery.dataTables'],\n        function($, Str, ModalFactory, ModalEvents, Fragment, Ajax, Y) {\n\n    /**\n     * Constructor\n     * @param {String} args used to find triggers for the new group modal.\n     * Each call to init gets it's own instance of this class.\n     */\n    var NewUser = function(args) {\n\n        this.contextid = args.context;\n        this.id = args.id;\n        var self = this;\n        this.args = args;\n        self.init(args);\n    };\n    /**\n     * @var {Modal} modal\n     * @private\n     */\n    NewUser.prototype.modal = null;\n    /**\n     * @var {int} contextid\n     * @private\n     */\n    NewUser.prototype.contextid = -1;\n    /**\n     * Initialise the class.\n     * @private\n     * @return {Promise}\n     */\n    NewUser.prototype.init = function() {\n        var self = this;\n        // Fetch the title string.\n            if (self.id) {\n                var strings  = Str.get_strings([\n                                {\n                                    key: 'edituser',\n                                    component: 'local_users'\n                                },\n                                {\n                                    key: 'save_continue',\n                                    component: 'local_users'\n                                },\n                                {\n                                    key: 'previous',\n                                    component: 'local_users'\n                                },\n                                {\n                                    key: 'cancel',\n                                    component: 'local_users'\n                                }]);\n            }else{\n               var strings  = Str.get_strings([\n                            {\n                                key: 'adnewuser',\n                                component: 'local_users'\n                            },\n                            {\n                                key: 'save_continue',\n                                component: 'local_users'\n                            },                \n                            {\n                                key: 'previous',\n                                component: 'local_users'\n                            },\n                            {\n                                key: 'cancel',\n                                component: 'local_users'\n                            }]);\n            }\n\n            return strings.then(function(strings) {\n                // Create the modal.\n                return ModalFactory.create({\n                    type: ModalFactory.types.DEFAULT,\n                    title: strings[0],\n                    body: this.getBody(),\n                    footer: this.getFooter(strings),\n                });\n            }.bind(this)).then(function(modal) {\n                // Keep a reference to the modal.\n                this.modal = modal;\n                // Forms are big, we want a big modal.\n                this.modal.setLarge();\n                this.modal.getRoot().addClass('openLMStransition local_users');\n                this.modal.getRoot().on(ModalEvents.hidden, function() {\n                    this.modal.getRoot().animate({\"right\":\"-85%\"}, 500);\n                    setTimeout(function(){\n                        modal.destroy();\n                    }, 500);\n                }.bind(this));\n\n                this.modal.getFooter().find('[data-action=\"save\"]').on('click', this.submitForm.bind(this));\n                // We also catch the form submit event and use it to submit the form with ajax.\n                this.modal.getFooter().find('[data-action=\"cancel\"]').on('click', function() {\n                    modal.hide();\n                    setTimeout(function(){\n                        modal.destroy();\n                    }, 500);\n                    window.location.reload();\n                });\n\n                this.modal.getFooter().find('[data-action=\"previous\"]').on('click', function() {\n                    self.args.form_status = self.args.form_status - 1;\n                    var data = self.getBody();\n                    data.then(function(html) {\n                        if(html === false) {\n                            window.location.reload();\n                        }\n                    });\n                    modal.setBody(data);\n                    if(self.args.form_status==0){\n                        $('[data-action=\"previous\"]').css('display', 'none');\n                    }else{\n                        $('[data-action=\"previous\"]').css('display', 'block');\n                    }\n                });\n                this.modal.getRoot().on('submit', 'form', function(form) {\n                    self.submitFormAjax(form, self.args);\n                });\n                this.modal.show();\n                this.modal.getRoot().animate({\"right\":\"0%\"}, 500);\n\n                return this.modal;\n            }.bind(this));\n    };\n    /**\n     * @param {object} formdata\n     * @method getBody\n     * @private\n     * @return {Promise}\n     */\n    NewUser.prototype.getBody = function(formdata) {\n        if (typeof formdata === \"undefined\") {\n            formdata = {};\n        }\n\n        this.args.jsonformdata = JSON.stringify(formdata);\n        return Fragment.loadFragment('local_users', 'new_create_user', this.contextid, this.args);\n    };\n    /**\n     * @param {string} strings The CSS selector used to find nodes that will trigger this module.\n     * @method getFooter\n     * @private\n     * @return {Promise}\n     */\n    NewUser.prototype.getFooter = function(strings) {\n        var $footer;\n        var $style;\n        $footer = '<button type=\"button\" class=\"btn btn-primary\" data-action=\"save\">'+ strings[1] +'</button>&nbsp;';\n        $style = 'style=\"display:none;\"';\n$footer += '<button type=\"button\" class=\"btn btn-secondary\" data-action=\"previous\" ' + $style + ' >'+ strings[2] +'</button>&nbsp;';\n$footer += '<button type=\"button\" class=\"btn btn-secondary\" data-action=\"cancel\">'+ strings[3] +'</button>';\n        return $footer;\n    };\n    /**\n     * @method handleFormSubmissionResponse\n     * @private\n     * @return {Promise}\n     */\n    NewUser.prototype.handleFormSubmissionResponse = function() {\n        this.modal.hide();\n        // We could trigger an event instead.\n        // Yuk.\n        Y.use('moodle-core-formchangechecker', function() {\n            M.core_formchangechecker.reset_form_dirty_state();\n        });\n        // This will be the context for our template. So {{name}} in the template will resolve to \"Tweety bird\".\n        var args;\n        var Templates;\n        var context = { id: args.id};\n\n                var modalPromise = ModalFactory.create({\n                    type: ModalFactory.types.DEFAULT,\n                    body: Templates.render('local_classroom/classroomview', context),\n                });\n                $.when(modalPromise).then(function() {\n\n                }).fail(Notification.exception);\n    };\n    /**\n     * @param {object} data\n     * @method handleFormSubmissionFailure\n     * @private\n     * @return {Promise}\n     */\n    NewUser.prototype.handleFormSubmissionFailure = function(data) {\n        // Oh noes! Epic fail :(\n        // Ah wait - this is normal. We need to re-display the form with errors!\n        this.modal.setBody(this.getBody(data));\n    };\n    /**\n     * Private method\n     * @method submitFormAjax\n     * @private\n     * @param {Event} e Form submission event.\n     * @param {object} args\n     */\n    NewUser.prototype.submitFormAjax = function(e ,args) {\n        // We don't want to do a real form submission.\n        e.preventDefault();\n        var self = this;\n        // Convert all the form elements values to a serialised string.\n        var formData = this.modal.getRoot().find('form').serialize();\n        var methodname = 'local_users_submit_create_user_form';\n        var params = {};\n        params.contextid = this.contextid;\n        params.jsonformdata = JSON.stringify(formData);\n        params.form_status = args.form_status;\n        var promise = Ajax.call([{\n            methodname: methodname,\n            args: params\n        }]);\n\n        promise[0].done(function(resp){\n            if(resp.form_status !== -1 && resp.form_status !== false) {\n                self.args.form_status = resp.form_status;\n                self.args.id = resp.id;\n                self.handleFormSubmissionFailure();\n            } else {\n                self.modal.hide();\n                window.location.reload();\n            }\n            if(args.form_status > 0) {\n                $('[data-action=\"previous\"]').css('display', 'inline-block');\n            }\n\n        }).fail(function(){\n            self.handleFormSubmissionFailure(formData);\n        });\n    };\n    /**\n     * This triggers a form submission, so that any mform elements can do final tricks before the form submission is processed.\n     *\n     * @method submitForm\n     * @param {Event} e Form submission event.\n     * @private\n     */\n    NewUser.prototype.submitForm = function(e) {\n        e.preventDefault();\n        var self = this;\n        self.modal.getRoot().find('form').submit();\n    };\n    return /** @alias module:local_users/newuser */ {\n        // Public variables and functions.\n        /**\n         * Attach event listeners to initialise this module.\n         *\n         * @method init\n         * @param {string} args The CSS selector used to find nodes that will trigger this module.\n         * @return {Promise}\n         */\n        init: function(args) {\n            return new NewUser(args);\n        },\n        load: function(){\n            $(document).on('change', '#id_open_costcenterid', function() {\n              var costcentervalue = $(this).find(\"option:selected\").val();\n               if (costcentervalue !== null) {\n                    var params = {};\n                    params.costcenterid = costcentervalue;\n                    params.contextid = 1;\n                    var promise = Ajax.call([{\n                        methodname: 'local_users_get_departments_list',\n                        args: params\n                    }]);\n                    promise[0].done(function(resp) {\n                        var resp = JSON.parse(resp);\n                        var template = '';\n                        $.each(resp, function(index,value) {\n                            template += '<option value = ' + index + ' >' +value + '</option>';\n                        });\n                        $(\"#id_open_departmentid\").html(template);\n                    });\n                }\n                $('#id_open_departmentid').trigger('change');\n                $('#id_open_subdepartment').trigger('change');\n            });\n            $(document).on('change', '#id_open_departmentid', function() {\n              var departmentvalue = $(this).find(\"option:selected\").val();\n               if (departmentvalue !== null) {\n                    var params = {};\n                    params.departmentid = departmentvalue;\n                    params.contextid = 1;\n                    var promise = Ajax.call([{\n                        methodname: 'local_users_get_subdepartments_list',\n                        args: params\n                    }]);\n                    promise[0].done(function(resp) {\n                        var resp = JSON.parse(resp);\n                        var template = '';\n                        $.each(resp, function(index,value) {\n                            template += '<option value = ' + index + ' >' +value + '</option>';\n                        });\n                        $(\"#id_open_subdepartment\").html(template);\n                    });\n                }\n            });\n            $(document).on('change', '#id_open_costcenterid', function() {\n                var costcentervalue = $(this).find(\"option:selected\").val();\n                if (costcentervalue != 0) {\n                    var params = {};\n                    params.costcenterid = costcentervalue;\n                    params.contextid = 1;\n                    var promise = Ajax.call([{\n                        methodname: 'local_users_get_supervisors_list',\n                        args: params\n                    }]);\n                    promise[0].done(function(resp) {\n                        var resp = JSON.parse(resp);\n                        var template = '';\n                        $.each(resp, function(index,value) {\n                            template += '<option value = ' + index + ' >' +value + '</option>';\n                        });\n                        $(\"#open_supervisorid\").html(template);\n                    });\n                }\n                $('#open_supervisorid').trigger('change');\n            });\n        },\n        deleteConfirm: function(args) {\n            return Str.get_strings([{\n                key: 'confirm'\n            },\n            {\n                key: 'deleteconfirm',\n                component: 'local_users',\n                param :args\n            },\n            {\n                key: 'deleteallconfirm',\n                component: 'local_users'\n            },\n            {\n                key: 'delete'\n            }]).then(function(s) {\n                ModalFactory.create({\n                    title: s[0],\n                    type: ModalFactory.types.SAVE_CANCEL,\n                    body: s[1]\n                }).done(function(modal) {\n                    this.modal = modal;\n                    modal.setSaveButtonText(s[3]);\n                    modal.getRoot().on(ModalEvents.save, function(e) {\n                        e.preventDefault();\n                        args.confirm = true;\n                        var params = {};\n                        params.id = args.id;\n                        params.contextid = args.contextid;\n                        var promise = Ajax.call([{\n                            methodname: 'local_users_'+args.action,\n                            args: params\n                        }]);\n                        promise[0].done(function() {\n                            window.location.href = window.location.href+String();\n                        }).fail(function() {\n                            // do something with the exception\n                        });\n                    }.bind(this));\n                    modal.show();\n                }.bind(this));\n            }.bind(this));\n        },\n        notdeleteConfirm: function(args) {\n            return Str.get_strings([{\n                key: 'confirm'\n            },\n            {\n                key: 'notdeleteuser',\n                component: 'local_users',\n                param :args\n            }\n            ]).then(function(s) {\n                ModalFactory.create({\n                    title: s[0],\n                    // type: ModalFactory.types.SAVE_CANCEL,\n                    body: s[1]\n                }).done(function(modal) {\n                    this.modal = modal;\n                    // modal.setSaveButtonText(s[3]);\n                    modal.getRoot().on(ModalEvents.save, function(e) {\n                        e.preventDefault();\n                        args.confirm = true;\n                        var params = {};\n                        params.id = args.id;\n                        params.contextid = args.contextid;\n                        var promise = Ajax.call([{\n                            methodname: 'local_users_'+args.action,\n                            args: params\n                        }]);\n                        promise[0].done(function() {\n                            window.location.href = window.location.href+String();\n                        }).fail(function() {\n                            // do something with the exception\n                        });\n                    }.bind(this));\n                    modal.show();\n                }.bind(this));\n            }.bind(this));\n        },\n        notsuspendConfirm: function(args) {\n            return Str.get_strings([{\n                key: 'confirm'\n            },\n            {\n                key: 'notsuspenduser',\n                component: 'local_users',\n                param :args\n            }\n            ]).then(function(s) {\n                ModalFactory.create({\n                    title: s[0],\n                    // type: ModalFactory.types.SAVE_CANCEL,\n                    body: s[1]\n                }).done(function(modal) {\n                    this.modal = modal;\n                    // modal.setSaveButtonText(s[3]);\n                    modal.getRoot().on(ModalEvents.save, function(e) {\n                        e.preventDefault();\n                        args.confirm = true;\n                        var params = {};\n                        params.id = args.id;\n                        params.contextid = args.contextid;\n                        var promise = Ajax.call([{\n                            methodname: 'local_users_'+args.action,\n                            args: params\n                        }]);\n                        promise[0].done(function() {\n                            window.location.href = window.location.href+String();\n                        }).fail(function() {\n                            // do something with the exception\n                        });\n                    }.bind(this));\n                    modal.show();\n                }.bind(this));\n            }.bind(this));\n        },\n        batchdeleteConfirm: function(args) {\n            return Str.get_strings([{\n                key: 'confirm'\n            },\n            {\n                key: 'batchdeleteuser',\n                component: 'local_users',\n                param :args\n            }\n            ]).then(function(s) {\n                ModalFactory.create({\n                    title: s[0],\n                    // type: ModalFactory.types.SAVE_CANCEL,\n                    body: s[1]\n                }).done(function(modal) {\n                    this.modal = modal;\n                    // modal.setSaveButtonText(s[3]);\n                    modal.getRoot().on(ModalEvents.save, function(e) {\n                        e.preventDefault();\n                        args.confirm = true;\n                        var params = {};\n                        params.id = args.id;\n                        params.contextid = args.contextid;\n                        var promise = Ajax.call([{\n                            methodname: 'local_users_'+args.action,\n                            args: params\n                        }]);\n                        promise[0].done(function() {\n                            window.location.href = window.location.href+String();\n                        }).fail(function() {\n                            // do something with the exception\n                        });\n                    }.bind(this));\n                    modal.show();\n                }.bind(this));\n            }.bind(this));\n        },\n        userSuspend: function(args) {\n            return Str.get_strings([{\n                key: 'confirm'\n            },\n            {\n                key: 'suspendconfirm'+args.status,\n                component: 'local_users',\n                param :args\n            },\n            {\n                key: 'suspendallconfirm',\n                component: 'local_users'\n            },\n            {\n                key: 'confirm'\n            }]).then(function(s) {\n                ModalFactory.create({\n                    title: s[0],\n                    type: ModalFactory.types.SAVE_CANCEL,\n                    body: s[1]\n                }).done(function(modal) {\n                    this.modal = modal;\n                    modal.setSaveButtonText(s[3]);\n                    modal.getRoot().on(ModalEvents.save, function(e) {\n                        e.preventDefault();\n                        args.confirm = true;\n                        var params = {};\n                        params.id = args.id;\n                        params.contextid = args.contextid;\n                        var promise = Ajax.call([{\n                            methodname: 'local_users_suspend_user',\n                            args: params\n                        }]);\n                        promise[0].done(function() {\n                            window.location.href = window.location.href+String();\n                        }).fail(function() {\n                            // do something with the exception\n                        });\n                    }.bind(this));\n                    modal.show();\n                }.bind(this));\n            }.bind(this));\n        },\n    };\n});\n"],"names":["define","$","Str","ModalFactory","ModalEvents","Fragment","Ajax","Y","NewUser","args","contextid","context","id","this","init","prototype","modal","self","strings","get_strings","key","component","then","create","type","types","DEFAULT","title","body","getBody","footer","getFooter","bind","setLarge","getRoot","addClass","on","hidden","animate","setTimeout","destroy","find","submitForm","hide","window","location","reload","form_status","data","html","setBody","css","form","submitFormAjax","show","formdata","jsonformdata","JSON","stringify","loadFragment","$footer","handleFormSubmissionResponse","use","M","core_formchangechecker","reset_form_dirty_state","modalPromise","Templates","render","when","fail","Notification","exception","handleFormSubmissionFailure","e","preventDefault","formData","serialize","params","call","methodname","done","resp","submit","load","document","costcentervalue","val","costcenterid","parse","template","each","index","value","trigger","departmentvalue","departmentid","deleteConfirm","param","s","SAVE_CANCEL","setSaveButtonText","save","confirm","action","href","String","notdeleteConfirm","notsuspendConfirm","batchdeleteConfirm","userSuspend","status"],"mappings":"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"}