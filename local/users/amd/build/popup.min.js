/**
 * Add a create new group modal to the page.
 *
 * @module     local_courses/newcourse
 * @class      NewCourse
 * @package
 * @copyright  2017 Shivani
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_users/popup",["local_users/jquery.dataTables","jquery","core/str","core/modal_factory","core/modal_events","core/fragment","core/ajax","core/yui","jqueryui"],(function(DataTable,$,Str,ModalFactory,ModalEvents,Fragment){var NewPopup=function(args){this.contextid=args.contextid,this.id=args.id;this.init(args.selector)};return NewPopup.prototype.modal=null,NewPopup.prototype.contextid=-1,NewPopup.prototype.init=function(){var self=this;$(document).on("click","#userprogrampopup",(function(){self.programid=$(this).data("programid"),self.userid=$(this).data("userid"),Str.get_string("programdetails","local_users",self).then((function(title){ModalFactory.create({title:title,body:self.ugetBody()}).done((function(modal){self.modal=modal,self.modal.setLarge(),self.modal.getRoot().on(ModalEvents.hidden,function(){self.modal.hide(),self.modal.destroy()}.bind(this)),self.modal.getRoot().on(ModalEvents.cancel,function(){self.modal.hide(),self.modal.destroy()}.bind(this)),self.modal.show(),self.modal.getRoot().on(ModalEvents.bodyRendered,function(){self.dataTableshow(self.programid)}.bind(this))}))}))})),$(document).on("click",".rolesuserpopupteacher",(function(){self.id=$(this).data("id"),Str.get_string("facultydetails","local_users",self).then((function(title){ModalFactory.create({title:title,body:self.getBody()}).done((function(modal){self.modal=modal,self.modal.setSmall(),self.modal.getRoot().on(ModalEvents.hidden,function(){self.modal.hide(),self.modal.destroy()}.bind(this)),self.modal.getRoot().on(ModalEvents.cancel,function(){self.modal.hide(),self.modal.destroy()}.bind(this)),self.modal.show(),self.modal.getRoot().on(ModalEvents.bodyRendered,function(){}.bind(this))}))}))})),$(document).on("click",".rolesuserpopup",(function(){self.id=$(this).data("id"),Str.get_string("coursedetails","local_users",self).then((function(title){ModalFactory.create({title:title,body:self.pgetBody()}).done((function(modal){self.modal=modal,self.modal.setLarge(),self.modal.getRoot().on(ModalEvents.hidden,function(){self.modal.hide(),self.modal.destroy()}.bind(this)),self.modal.getRoot().on(ModalEvents.cancel,function(){self.modal.hide(),self.modal.destroy()}.bind(this)),self.modal.show(),self.modal.getRoot().on(ModalEvents.bodyRendered,function(){self.dataTableshows()}.bind(this))}))}))})),$(document).on("click",".rolesuserpopupsems",(function(){self.id=$(this).data("id"),Str.get_string("semdetails","local_users",self).then((function(title){ModalFactory.create({title:title,body:self.semgetBody()}).done((function(modal){self.modal=modal,self.modal.setLarge(),self.modal.getRoot().on(ModalEvents.hidden,function(){self.modal.hide(),self.modal.destroy()}.bind(this)),self.modal.getRoot().on(ModalEvents.cancel,function(){self.modal.hide(),self.modal.destroy()}.bind(this)),self.modal.show(),self.modal.getRoot().on(ModalEvents.bodyRendered,function(){}.bind(this))}))}))})),$(document).on("click",".rolesuserpopuptopics",(function(){self.id=$(this).data("id"),Str.get_string("topicdetails","local_users",self).then((function(title){ModalFactory.create({title:title,body:self.topicsgetBody()}).done((function(modal){self.modal=modal,self.modal.setSmall(),self.modal.getRoot().on(ModalEvents.hidden,function(){self.modal.hide(),self.modal.destroy()}.bind(this)),self.modal.getRoot().on(ModalEvents.cancel,function(){self.modal.hide(),self.modal.destroy()}.bind(this)),self.modal.show(),self.modal.getRoot().on(ModalEvents.bodyRendered,function(){}.bind(this))}))}))})),$(document).on("click",".rolesuserpopupsemcourse",(function(){self.id=$(this).data("id"),Str.get_string("semcoursedetails","local_users",self).then((function(title){ModalFactory.create({title:title,body:self.semcoursegetBody()}).done((function(modal){self.modal=modal,self.modal.setSmall(),self.modal.getRoot().on(ModalEvents.hidden,function(){self.modal.hide(),self.modal.destroy()}.bind(this)),self.modal.getRoot().on(ModalEvents.cancel,function(){self.modal.hide(),self.modal.destroy()}.bind(this)),self.modal.show(),self.modal.getRoot().on(ModalEvents.bodyRendered,function(){}.bind(this))}))}))}))},NewPopup.prototype.dataTableshow=function(batchid){Str.get_strings([{key:"nodata_available",component:"local_groups"},{key:"search",component:"local_groups"}]).then(function(s){$("#popup_user"+batchid).DataTable({bPaginate:!0,bFilter:!0,bLengthChange:!0,bInfo:!1,paging:!0,lengthMenu:[[5,10,25,50,100,-1],[5,10,25,50,100,"All"]],language:{emptyTable:s[0],infoEmpty:s[0],zeroRecords:s[0],paginate:{previous:"<",next:">"}},oLanguage:{sSearch:s[1]},bProcessing:!0,stateSave:!0,bDestroy:!0})}.bind(this))},NewPopup.prototype.dataTableshows=function(){Str.get_strings([{key:"nodata_available",component:"local_groups"},{key:"search",component:"local_groups"}]).then(function(s){$("#local_course_data").DataTable({bPaginate:!0,bFilter:!0,bLengthChange:!0,bInfo:!1,paging:!0,lengthMenu:[[5,10,25,50,100,-1],[5,10,25,50,100,"All"]],language:{emptyTable:s[0],infoEmpty:s[0],zeroRecords:s[0],paginate:{previous:"<",next:">"}},oLanguage:{sSearch:s[1]},bProcessing:!0,stateSave:!0,bDestroy:!0})}.bind(this))},NewPopup.prototype.getBody=function(formdata){if(void 0===formdata&&(formdata={}),void 0!==this.id)var params={id:this.id,jsonformdata:JSON.stringify(formdata)};else params={};return Fragment.loadFragment("local_users","teacher_display",this.contextid,params)},NewPopup.prototype.pgetBody=function(formdata){if(void 0===formdata&&(formdata={}),void 0!==this.id)var params={id:this.id,jsonformdata:JSON.stringify(formdata)};else params={};return Fragment.loadFragment("local_users","users_display",this.contextid,params)},NewPopup.prototype.semgetBody=function(formdata){if(void 0===formdata&&(formdata={}),void 0!==this.id)var params={id:this.id,jsonformdata:JSON.stringify(formdata)};else params={};return Fragment.loadFragment("local_users","sems_display",this.contextid,params)},NewPopup.prototype.topicsgetBody=function(formdata){if(void 0===formdata&&(formdata={}),void 0!==this.id)var params={id:this.id,jsonformdata:JSON.stringify(formdata)};else params={};return Fragment.loadFragment("local_users","topics_display",this.contextid,params)},NewPopup.prototype.semcoursegetBody=function(formdata){if(void 0===formdata&&(formdata={}),void 0!==this.id)var params={id:this.id,jsonformdata:JSON.stringify(formdata)};else params={};return Fragment.loadFragment("local_users","semcourse_display",this.contextid,params)},NewPopup.prototype.ugetBody=function(formdata){if(void 0===formdata&&(formdata={}),void 0!==this.programid)var params={programid:this.programid,userid:this.userid,jsonformdata:JSON.stringify(formdata)};else params={};return Fragment.loadFragment("local_users","program_display",this.contextid,params)},{init:function(args){return this.Datatable(),new NewPopup(args)},Datatable:function(){}}}));

//# sourceMappingURL=popup.min.js.map
