/**
 * Add a create new group modal to the page.
 *
 * @module     local_batch/Batch
 * @class      Batch
 * @copyright  2023 Dipanshu
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_groups/popup",["local_groups/jquery.dataTables","jquery","core/str","core/modal_factory","core/modal_events","core/fragment","core/ajax","core/yui","jqueryui"],(function(DataTable,$,str,ModalFactory,ModalEvents,Fragment,Ajax,Y){var NewPopup=function(args){this.contextid=args.contextid;this.init(args.selector)};return NewPopup.prototype.init=function(selector){var self=this;$(document).on("click","#batchuserpopup",(function(){self.batchid=$(this).data("batchid"),self.action=$(this).data("action"),str.get_string("udetails","local_groups").then((function(title){ModalFactory.create({title:title,body:self.getBody()}).done((function(modal){self.modal=modal,self.modal.setLarge(),self.modal.getRoot().on(ModalEvents.hidden,function(){self.modal.hide(),self.modal.destroy()}.bind(this)),self.modal.getRoot().on(ModalEvents.cancel,function(){self.modal.hide(),self.modal.destroy()}.bind(this)),self.modal.show(),self.modal.getRoot().on(ModalEvents.bodyRendered,function(){self.dataTableshow()}.bind(this))}))}))})),$(document).on("click","#batchsemesterpopup",(function(){self.roleid=$(this).data("roleid"),self.username=$(this).data("username"),self.groupid=$(this).data("batchid"),str.get_string("semdetails","local_groups",self.username).then((function(title){ModalFactory.create({title:title,body:self.semgetBody()}).done((function(modal){self.modal=modal,self.modal.setLarge(),self.modal.getRoot().on(ModalEvents.hidden,function(){self.modal.hide(),self.modal.destroy()}.bind(this)),self.modal.getRoot().on(ModalEvents.cancel,function(){self.modal.hide(),self.modal.destroy()}.bind(this)),self.modal.show(),self.modal.getRoot().on(ModalEvents.bodyRendered,function(){self.semdataTableshow()}.bind(this))}))}))})),$(document).on("click","#batchprogrampopup",(function(){self.roleid=$(this).data("roleid"),self.batchid=$(this).data("batchid"),str.get_string("pdetails","local_groups").then((function(title){ModalFactory.create({title:title,body:self.pgetBody()}).done((function(modal){self.modal=modal,self.modal.setLarge(),self.modal.getRoot().on(ModalEvents.hidden,function(){self.modal.hide(),self.modal.destroy()}.bind(this)),self.modal.getRoot().on(ModalEvents.cancel,function(){self.modal.hide(),self.modal.destroy()}.bind(this)),self.modal.show(),self.modal.getRoot().on(ModalEvents.bodyRendered,function(){self.coursedataTableshow()}.bind(this))}))}))})),$(document).on("click","#batchprogresspopup",(function(){self.roleid=$(this).data("roleid"),self.levelid=$(this).data("levelid"),self.username=$(this).data("username"),str.get_string("cdetails","local_groups",self.username).then((function(title){ModalFactory.create({title:title,body:self.progressgetBody()}).done((function(modal){self.modal=modal,self.modal.setLarge(),self.modal.getRoot().on(ModalEvents.hidden,function(){self.modal.hide(),self.modal.destroy()}.bind(this)),self.modal.getRoot().on(ModalEvents.cancel,function(){self.modal.hide(),self.modal.destroy()}.bind(this)),self.modal.show(),self.modal.getRoot().on(ModalEvents.bodyRendered,function(){self.dataTableshows()}.bind(this))}))}))}))},NewPopup.prototype.dataTableshow=function(){str.get_strings([{key:"nousers_available",component:"local_groups"},{key:"search",component:"local_groups"}]).then(function(s){$(".class_local_program_user_course_data").DataTable({bPaginate:!0,bFilter:!0,bLengthChange:!0,bInfo:!1,paging:!0,lengthMenu:[[5,10,25,50,100,-1],[5,10,25,50,100,"All"]],language:{emptyTable:s[0],infoEmpty:s[0],zeroRecords:s[0],paginate:{previous:"<",next:">"}},oLanguage:{sZeroRecords:s[0],sSearch:s[1]},bProcessing:!0,stateSave:!0,bDestroy:!0}).search("").draw()}.bind(this))},NewPopup.prototype.semdataTableshow=function(){str.get_strings([{key:"nosem_available",component:"local_groups"},{key:"search",component:"local_groups"}]).then(function(s){$(".class_local_semester_data").DataTable({bPaginate:!0,bFilter:!0,bLengthChange:!0,bInfo:!1,paging:!0,lengthMenu:[[5,10,25,50,100,-1],[5,10,25,50,100,"All"]],language:{emptyTable:s[0],infoEmpty:s[0],zeroRecords:s[0],paginate:{previous:"<",next:">"}},oLanguage:{sZeroRecords:s[0],sSearch:s[1]},bProcessing:!0,stateSave:!0,bDestroy:!0}).search("").draw()}.bind(this))},NewPopup.prototype.dataTableshows=function(){str.get_strings([{key:"nocr_available",component:"local_groups"},{key:"search",component:"local_groups"}]).then(function(s){$("#popup_progress_user").DataTable({bPaginate:!0,bFilter:!0,bLengthChange:!0,bInfo:!1,paging:!0,lengthMenu:[[5,10,25,50,100,-1],[5,10,25,50,100,"All"]],language:{emptyTable:s[0],infoEmpty:s[0],zeroRecords:s[0],paginate:{previous:"<",next:">"}},oLanguage:{sZeroRecords:s[0],sSearch:s[1]},bProcessing:!0,stateSave:!0,bDestroy:!0}).search("").draw()}.bind(this))},NewPopup.prototype.coursedataTableshow=function(){str.get_strings([{key:"nousers_available",component:"local_groups"},{key:"search",component:"local_groups"}]).then(function(s){$("#local_course_data").DataTable({bPaginate:!0,bFilter:!0,bLengthChange:!0,bInfo:!1,paging:!0,lengthMenu:[[5,10,25,50,100,-1],[5,10,25,50,100,"All"]],language:{emptyTable:s[0],infoEmpty:s[0],zeroRecords:s[0],paginate:{previous:"<",next:">"}},oLanguage:{sZeroRecords:s[0],sSearch:s[1]},bProcessing:!0,stateSave:!0,bDestroy:!0}).search("").draw()}.bind(this))},NewPopup.prototype.getBody=function(formdata){if(void 0===formdata&&(formdata={}),void 0!==this.batchid)var params={batchid:this.batchid,jsonformdata:JSON.stringify(formdata)};else params={};return Fragment.loadFragment("local_groups","batchuser_display",this.contextid,params)},NewPopup.prototype.pgetBody=function(formdata){if(void 0===formdata&&(formdata={}),void 0!==this.roleid)var params={roleid:this.roleid,batchid:this.batchid,jsonformdata:JSON.stringify(formdata)};else params={};return Fragment.loadFragment("local_groups","batchprogram_display",this.contextid,params)},NewPopup.prototype.progressgetBody=function(formdata){if(void 0===formdata&&(formdata={}),void 0!==this.roleid)var params={roleid:this.roleid,levelid:this.levelid,jsonformdata:JSON.stringify(formdata)};else params={};return Fragment.loadFragment("local_groups","batchprogress_display",this.contextid,params)},NewPopup.prototype.semgetBody=function(formdata){if(void 0===formdata&&(formdata={}),void 0!==this.roleid)var params={roleid:this.roleid,jsonformdata:JSON.stringify(formdata)};else params={};return Fragment.loadFragment("local_groups","semesterrogress_display",this.contextid,params)},{init:function(args){return this.Datatable(),new NewPopup(args)},Datatable:function(){}}}));

//# sourceMappingURL=popup.min.js.map